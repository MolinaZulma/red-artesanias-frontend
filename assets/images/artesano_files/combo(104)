YUI.add("hermes-template-sub-photo-contexts-title-galleries",(function(n,e){var l=n.Template.Handlebars.revive({1:function(n,e,l,t,o){var a,r=null!=e?e:n.nullContext||{},i=n.hooks.helperMissing,s=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return(null!=(a=(s(l,"ifCond")||e&&s(e,"ifCond")||i).call(r,null!=e?s(e,"total"):e,"!==",0,{name:"ifCond",hash:{},fn:n.program(2,o,0),inverse:n.noop,data:o,loc:{start:{line:3,column:2},end:{line:5,column:13}}}))?a:"")+(null!=(a=(s(l,"ifCond")||e&&s(e,"ifCond")||i).call(r,null!=e?s(e,"total"):e,"===",0,{name:"ifCond",hash:{},fn:n.program(4,o,0),inverse:n.noop,data:o,loc:{start:{line:6,column:2},end:{line:8,column:13}}}))?a:"")},2:function(n,e,l,t,o){var a=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return"\t\t\t"+n.escapeExpression((a(l,"intlMessage")||e&&a(e,"intlMessage")||n.hooks.helperMissing).call(null!=e?e:n.nullContext||{},{name:"intlMessage",hash:{count:null!=e?a(e,"totalFriendly"):e,intlName:"photo-page-scrappy.GALLERIES_COUNT"},data:o,loc:{start:{line:4,column:3},end:{line:4,column:84}}}))+"\n"},4:function(n,e,l,t,o){var a=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return"\t\t\t"+n.escapeExpression((a(l,"intlMessage")||e&&a(e,"intlMessage")||n.hooks.helperMissing).call(null!=e?e:n.nullContext||{},{name:"intlMessage",hash:{intlName:"common.GALLERIES"},data:o,loc:{start:{line:7,column:3},end:{line:7,column:46}}}))+"\n"},6:function(n,e,l,t,o){var a,r=null!=e?e:n.nullContext||{},i=n.hooks.helperMissing,s=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return(null!=(a=(s(l,"ifCond")||e&&s(e,"ifCond")||i).call(r,null!=e?s(e,"total"):e,"===",1,{name:"ifCond",hash:{},fn:n.program(7,o,0),inverse:n.noop,data:o,loc:{start:{line:10,column:2},end:{line:12,column:13}}}))?a:"")+(null!=(a=(s(l,"ifCond")||e&&s(e,"ifCond")||i).call(r,null!=e?s(e,"total"):e,">",1,{name:"ifCond",hash:{},fn:n.program(9,o,0),inverse:n.noop,data:o,loc:{start:{line:13,column:2},end:{line:15,column:13}}}))?a:"")+(null!=(a=(s(l,"ifCond")||e&&s(e,"ifCond")||i).call(r,null!=e?s(e,"total"):e,"===",0,{name:"ifCond",hash:{},fn:n.program(4,o,0),inverse:n.noop,data:o,loc:{start:{line:16,column:2},end:{line:18,column:13}}}))?a:"")},7:function(n,e,l,t,o){var a=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return"\t\t\t"+n.escapeExpression((a(l,"intlMessage")||e&&a(e,"intlMessage")||n.hooks.helperMissing).call(null!=e?e:n.nullContext||{},{name:"intlMessage",hash:{intlName:"photo-page-scrappy.PHOTO_IN_ONE_GALLERY"},data:o,loc:{start:{line:11,column:3},end:{line:11,column:69}}}))+"\n"},9:function(n,e,l,t,o){var a=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return"\t\t\t"+n.escapeExpression((a(l,"intlMessage")||e&&a(e,"intlMessage")||n.hooks.helperMissing).call(null!=e?e:n.nullContext||{},{name:"intlMessage",hash:{count:null!=e?a(e,"totalFriendly"):e,intlName:"photo-page-scrappy.PHOTO_IN_N_GALLERIES"},data:o,loc:{start:{line:14,column:3},end:{line:14,column:89}}}))+"\n"},compiler:[8,">= 4.3.0"],main:function(n,e,l,t,o){var a,r=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return'<h5 class="total">\n'+(null!=(a=r(l,"if").call(null!=e?e:n.nullContext||{},null!=e?r(e,"isMobile"):e,{name:"if",hash:{},fn:n.program(1,o,0),inverse:n.program(6,o,0),data:o,loc:{start:{line:2,column:1},end:{line:19,column:8}}}))?a:"")+"</h5>"},useData:!0}),t={};n.Array.each([],(function(e){var l=n.Template.get("hermes/"+e);l&&(t[e]=l)})),n.Template.register("hermes/sub-photo-contexts-title-galleries",(function(e,o){return(o=o||{}).partials=o.partials?n.merge(t,o.partials):t,l(e,o)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("hermes-template-sub-photo-contexts-galleries",(function(e,t){var n=e.Template.Handlebars.revive({1:function(e,t,n,l,o){var a,r=null!=t?t:e.nullContext||{},s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\t<div class="sub-photo-context sub-photo-context-galleries">\n'+(null!=(a=e.invokePartial(s(l,"sub-photo-contexts-title-galleries"),t,{name:"sub-photo-contexts-title-galleries",data:o,indent:"\t\t",helpers:n,partials:l,decorators:e.decorators}))?a:"")+"\n"+(null!=(a=s(n,"if").call(r,null!=t?s(t,"canAdd"):t,{name:"if",hash:{},fn:e.program(2,o,0),inverse:e.noop,data:o,loc:{start:{line:22,column:2},end:{line:24,column:9}}}))?a:"")+"\n"+(null!=(a=(s(n,"isFlipped")||t&&s(t,"isFlipped")||e.hooks.helperMissing).call(r,"enable-likes",{name:"isFlipped",hash:{},fn:e.program(4,o,0),inverse:e.noop,data:o,loc:{start:{line:26,column:2},end:{line:32,column:16}}}))?a:"")+'\n\t\t<ul class="context-list">\n'+(null!=(a=s(n,"each").call(r,null!=t?s(t,"contexts"):t,{name:"each",hash:{},fn:e.program(7,o,0),inverse:e.noop,data:o,loc:{start:{line:35,column:3},end:{line:37,column:12}}}))?a:"")+"\t\t</ul>\n"+(null!=(a=s(n,"if").call(r,null!=t?s(t,"showMore"):t,{name:"if",hash:{},fn:e.program(9,o,0),inverse:e.noop,data:o,loc:{start:{line:39,column:2},end:{line:41,column:9}}}))?a:"")+"\t</div>\n"},2:function(e,t,n,l,o){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\t\t\t<a href='#' class='add-to'>"+e.escapeExpression((a(n,"intlMessage")||t&&a(t,"intlMessage")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},{name:"intlMessage",hash:{intlName:"photo-page-scrappy.ADD_TO_GALLERY"},data:o,loc:{start:{line:23,column:30},end:{line:23,column:90}}}))+"</a>\n"},4:function(e,t,n,l,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=(r(n,"ifCond")||t&&r(t,"ifCond")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},null!=t?r(t,"faveCount"):t,">",0,{name:"ifCond",hash:{},fn:e.program(5,o,0),inverse:e.noop,data:o,loc:{start:{line:27,column:3},end:{line:31,column:14}}}))?a:""},5:function(e,t,n,l,o){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\t\t\t\t<div class="faves-container">\n\t\t\t\t\t'+e.escapeExpression((a(n,"outlet")||t&&a(t,"outlet")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},null!=t?a(t,"sub-photo-fave-view"):t,{name:"outlet",hash:{},data:o,loc:{start:{line:29,column:5},end:{line:29,column:35}}}))+"\n\t\t\t\t</div>\n"},7:function(e,t,n,l,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=e.invokePartial(r(l,"sub-photo-contexts-item"),t,{name:"sub-photo-contexts-item",data:o,indent:"\t\t\t\t",helpers:n,partials:l,decorators:e.decorators}))?a:""},9:function(e,t,n,l,o){var a=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\t\t\t<div class="view-all-contexts-of-type"><a href="#">'+e.escapeExpression((a(n,"intlMessage")||t&&a(t,"intlMessage")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},{name:"intlMessage",hash:{intlName:"photo-page-scrappy.VIEW_MORE_GALLERIES"},data:o,loc:{start:{line:40,column:54},end:{line:40,column:119}}}))+"</a></div>\n"},11:function(e,t,n,l,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return null!=(a=r(n,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"canAdd"):t,{name:"if",hash:{},fn:e.program(12,o,0),inverse:e.noop,data:o,loc:{start:{line:6,column:1},end:{line:11,column:8}}}))?a:""},12:function(e,t,n,l,o){var a=null!=t?t:e.nullContext||{},r=e.hooks.helperMissing,s=e.escapeExpression,i=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'\t\t<div class="sub-photo-context sub-photo-context-galleries empty">\n\t\t\t<p tabindex="0">'+s((i(n,"intlMessage")||t&&i(t,"intlMessage")||r).call(a,{name:"intlMessage",hash:{intlName:"photo-page-scrappy.PHOTO_NOT_IN_GALLERIES"},data:o,loc:{start:{line:8,column:19},end:{line:8,column:87}}}))+"</p>\n\t\t\t<p><a href='#' class='add-to'>"+s((i(n,"intlMessage")||t&&i(t,"intlMessage")||r).call(a,{name:"intlMessage",hash:{intlName:"photo-page-scrappy.ADD_TO_GALLERY"},data:o,loc:{start:{line:9,column:33},end:{line:9,column:93}}}))+"</a></p>\n\t\t</div>\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,l,o){var a,r=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return(null!=(a=r(n,"if").call(null!=t?t:e.nullContext||{},null!=t?r(t,"hasFavesOrGalleries"):t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.program(11,o,0),data:o,loc:{start:{line:1,column:0},end:{line:43,column:7}}}))?a:"")+"\n"},usePartial:!0,useData:!0}),l={};e.Array.each(["sub-photo-contexts-title-galleries","sub-photo-contexts-item"],(function(t){var n=e.Template.get("hermes/"+t);n&&(l[t]=n)})),e.Template.register("hermes/sub-photo-contexts-galleries",(function(t,o){return(o=o||{}).partials=o.partials?e.merge(l,o.partials):l,n(t,o)}))}),"@VERSION@",{requires:["template-base","handlebars-base","hermes-template-sub-photo-contexts-title-galleries","hermes-template-sub-photo-contexts-item"]});YUI.add("sub-photo-galleries-view",(function(t){t.FlickrView.create(this.name,t.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(t){this.params=t,this.photoId=t.photoId,this.list=[],this.loading=!1,this.removing={},this.startAmount=6,this.perPage=50,this.displayAmount=this.startAmount,this.addKeyShortcut="down:65",this.linkedToGalleries=t.linkedToGalleries,void 0!==this.getViewDataFromHistory("displayAmount")&&(this.startAmount=this.getViewDataFromHistory("displayAmount"),this.displayAmount=this.getViewDataFromHistory("displayAmount")),""===this.get("container").get("innerHTML")&&this.setContainerHTML("")},subviewConfig:{"sub-photo-fave-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1,disabled:function(){return!this.appContext.flipper.isFlipped("enable-likes")},additionalViewClasses:function(){return this.appContext.flipper.isFlipped("enable-likes")?["likes-enabled"]:void 0}}},loadState:function(){var e,o=this;return e={photoGalleriesModel:this.appContext.getModel("photo-galleries-models",this.photoId),photoModel:this.appContext.getModel("photo-models",this.photoId),photoPrivacyModel:this.appContext.getModel("photo-privacy-models",this.photoId),photoEngagementModel:this.appContext.getModel("photo-engagement-models",this.photoId)},this.appContext.getViewer().signedIn&&this.appContext.getViewer().nsid===this._params.nsid&&(e.personGalleriesModel=this.appContext.getModel("person-galleries-models",this.appContext.getViewer().nsid)),new t.FlickrPromise(e).then((function(e){return t.Object.each(e,(function(t,e){o.set(e,t)})),o.loadListData()}))},loadListData:function(){var e=this;return this.loading=!0,this.getGalleries(this.displayAmount).then((function(o){var i,n,s,a,l=e.list,r=[];return e.loading=!1,(r=o||[]).length>e.displayAmount&&(r=r.slice(0,e.displayAmount)),(n=l)===(s=r)||n.length===s.length&&(a=!0,t.Array.some(n,(function(t,e){if(t!==s[e])return a=!1,!0})),a)?i=!1:(e.list=r,i=!0),{listChanged:i}}))},getGalleries:function(e){var o=this.get("photoGalleriesModel"),i=o.getValue("galleries").getList(),n=o.getValue("total");return e>n&&(e=n),i.length<e?o.getListPageByContinuation(e-i.length).then((function(){return o.getValue("galleries").getList().slice(0,e)})):t.Promise.resolve(i.slice(0,e))},canViewerRemove:function(t){return this.appContext.getViewer().nsid===this._params.nsid||this.appContext.getViewer().nsid===t.getValue("owner").getValue("id")},canViewerAdd:function(){var t=0===this.get("photoModel").getValue("safetyLevel"),e=this.get("photoPrivacyModel").getValue("isPublic");return t&&e&&this.appContext.getViewer().nsid!==this._params.nsid&&this.appContext.getViewer().signedIn},listToJSON:function(){var t=this;return this.list.map((function(e){var o=e.toJSON();return o.isGallery=!0,o.canRemove=t.canViewerRemove(e),o}))},buildContainer:function(){var e=this.get("photoGalleriesModel").getValue("total"),o=e>this.displayAmount,i=this.get("photoEngagementModel").getValue("faveCount"),n=this.appContext.flipper.isFlipped("enable-likes")&&i>0||e>0;this.setContainerWithTemplate("sub-photo-contexts-galleries",{empty:0===this.list.length,canAdd:this.canViewerAdd(),contexts:this.listToJSON(),showMore:o,total:e,faveCount:i,hasFavesOrGalleries:n,totalFriendly:t.Number.format(e,{thousandsSeparator:","}),likesEnabled:this.appContext.flipper.isFlipped("enable-likes")})},activate:function(){var e=this,o=this.get("container");return this.canViewerAdd()&&(this.get("photoGalleriesModel")&&this.registerEventHandler(this.get("photoGalleriesModel").on("valuesChanged",this.handleListChanges.bind(this))),this.attachKeyEvent(this.addKeyShortcut,(function(t){t.preventDefault(),e.showAddDialog()}))),this.registerEventHandler(o.on("click",this.handleContainerClick.bind(this))),this.linkedToGalleries&&(t.AnchorRepositioner.jumpTo(o),o.one(".sub-photo-context-galleries").addClass("animated-permalink")),this},handleListChanges:function(t){this.loading||this.reload()},handleContainerClick:function(e){var o;if(e.target.ancestor(".remove",!0))e.preventDefault(),o=e.target.ancestor("li"),this.removeFromContext(o.getAttribute("data-context-id"),o),t.Snowplough.sendStructuredEvent({category:"photopageinteractions",action:"removeFromGalleryClick",label:o.getAttribute("data-context-id")},t.Snowplough.getPhotoContextFromModel(this.get("photoModel")));else if(e.target.ancestor(".add-to",!0))e.preventDefault(),this.showAddDialog(),t.Snowplough.sendStructuredEvent({category:"photopageinteractions",action:"addToGalleryClick"},t.Snowplough.getPhotoContextFromModel(this.get("photoModel")));else if(e.target.ancestor(".view-all-contexts-of-type a",!0))e.preventDefault(),this.showMore(),t.Snowplough.sendStructuredEvent({category:"photopageinteractions",action:"showMoreGalleriesClick"},t.Snowplough.getPhotoContextFromModel(this.get("photoModel")));else if(e.target&&"A"===e.target.getDOMNode().tagName)try{let o=e.target.ancestor("ul").get("children").indexOf(e.target.ancestor("li"));t.Snowplough.sendStructuredEvent({category:"photopageinteractions",action:"galleryClick",value:o+1},t.Snowplough.getPhotoContextFromModel(this.get("photoModel")))}catch(t){}},showMore:function(){this.displayAmount===this.startAmount&&this.startAmount<this.perPage?this.displayAmount=this.perPage:this.displayAmount+=this.perPage,this.setViewDataOnHistory("displayAmount",this.displayAmount),this.reload()},reload:function(){var t=this;this.loadListData().then((function(e){e.listChanged&&t.buildContainer()}))},removeFromContext:function(t,e){var o=this,i=this.get("photoGalleriesModel").getValue("galleries").getFromListByID(t).getValue("compoundId"),n={photoID:this.photoId,galleryCompoundID:i};this.removing[t]||(this.removing[t]=!0,e.setStyle("opacity","0"),"gallery-models","removePhoto",this.get("photoGalleriesModel"),this.appContext.getModelRegistry("gallery-models").then((function(i){i.remote.removePhoto(n,o.appContext).then((function(e){delete o.removing[t],o.reload()}),(function(i){throw delete o.removing[t],e.setStyle("opacity","1"),i})).then(null,(function(t){throw o.onError({message:o.intlMessage({intlName:"photo-page-scrappy.ERROR_REMOVING_FROM_GALLERY"}),err:t}),t}))})))},showAddDialog:function(){this.showAddToStuff()},showAddToStuff:function(){new t.CurationHelper(this.appContext,{view:this}).showAddToCuration({photoId:this.photoId,showAlbums:!1,showGalleries:!0,initialTab:"gallery",useViewportType:!1,containerType:"modal",modalSizeConfig:{selectionConfig:{height:450,flexLayout:!0},creationConfig:{height:"auto",flexLayout:!1}},theme:this.params.theme})},onError:function(e){var o=this;new t.Views.FluidModal({title:o.intlMessage({intlName:"common.ERROR"}),actionButtonLabel:o.intlMessage({intlName:"common.OK"}),textMessage:e.message,appContext:o.appContext,dismissOnOverlayClick:!0,dismissOnActionClick:!0,actionButtonDisabled:!1,showCancelButton:!1,showCancelX:!0}).show()}})}),"@VERSION@",{requires:["array-extras","flickr-view","fluid-modal-view","fluid-droparound-view","flickr-promise","hermes-template-sub-photo-contexts-item","hermes-template-sub-photo-contexts-title-galleries","hermes-template-sub-photo-contexts-galleries","url-helper","add-to-stuff-view","curation-helper"],optional:["photo-galleries-models","photo-models","person-galleries-models"],langBundles:["more-menu-view","photo-page-scrappy","common"]});YUI.add("sub-photo-contexts-view",(function(e){e.FlickrView.create(this.name,e.FlickrView,[],{initializer:function(e){return""===this.get("container").get("innerHTML")&&this.setContainerHTML(""),this},subviewConfig:{"sub-photo-groups-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!1},"sub-photo-albums-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!1},"sub-photo-galleries-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!1}},loadState:function(){return e.Promise.resolve()},buildContainer:function(){return this.setContainerWithTemplate("sub-photo-contexts"),this},buildErrorContainer:function(){},activate:function(){return this}})}),"@VERSION@",{requires:["flickr-view","hermes-template-sub-photo-contexts"],optional:["sub-photo-groups-view","sub-photo-albums-view","sub-photo-galleries-view"]});YUI.add("hermes-template-license-history",(function(t,e){var n=t.Template.Handlebars.revive({1:function(t,e,n,l,a){var s,o=null!=e?e:t.nullContext||{},i=t.hooks.helperMissing,r=t.escapeExpression,c=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return"\t\t\t\t<tr>\n\t\t\t\t\t<th>"+r((c(n,"intlMessage")||e&&c(e,"intlMessage")||i).call(o,{name:"intlMessage",hash:{intlName:"search.DATE"},data:a,loc:{start:{line:6,column:9},end:{line:6,column:47}}}))+'</th>\n\t\t\t\t\t<td class="word-wrap">'+r((c(n,"intlDate")||e&&c(e,"intlDate")||i).call(o,null!=e?c(e,"dateChange"):e,{name:"intlDate",hash:{timeStyle:"long",dateStyle:"long"},data:a,loc:{start:{line:7,column:27},end:{line:7,column:84}}}))+"</td>\n\t\t\t\t</tr>\n"+(null!=(s=c(n,"if").call(o,null!=e?c(e,"newLicense"):e,{name:"if",hash:{},fn:t.program(2,a,0),inverse:t.program(4,a,0),data:a,loc:{start:{line:9,column:4},end:{line:23,column:11}}}))?s:"")},2:function(t,e,n,l,a){var s,o=null!=e?e:t.nullContext||{},i=t.hooks.helperMissing,r=t.escapeExpression,c="function",u=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return"\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th>"+r((u(n,"intlMessage")||e&&u(e,"intlMessage")||i).call(o,{name:"intlMessage",hash:{intlName:"photo-page-scrappy.OLD_LICENSE"},data:a,loc:{start:{line:11,column:10},end:{line:11,column:67}}}))+'</th>\n\t\t\t\t\t\t<td><a href="'+r(typeof(s=null!=(s=u(n,"oldLicenseUrl")||(null!=e?u(e,"oldLicenseUrl"):e))?s:i)===c?s.call(o,{name:"oldLicenseUrl",hash:{},data:a,loc:{start:{line:12,column:19},end:{line:12,column:36}}}):s)+'" target="_blank">'+r(typeof(s=null!=(s=u(n,"oldLicense")||(null!=e?u(e,"oldLicense"):e))?s:i)===c?s.call(o,{name:"oldLicense",hash:{},data:a,loc:{start:{line:12,column:54},end:{line:12,column:68}}}):s)+'</a></td>\n\t\t\t\t\t</tr>\n\t\t\t\t\t<tr class="history-new-license">\n\t\t\t\t\t\t<th>'+r((u(n,"intlMessage")||e&&u(e,"intlMessage")||i).call(o,{name:"intlMessage",hash:{intlName:"photo-page-scrappy.NEW_LICENSE"},data:a,loc:{start:{line:15,column:10},end:{line:15,column:67}}}))+'</th>\n\t\t\t\t\t\t<td><a href="'+r(typeof(s=null!=(s=u(n,"newLicenseUrl")||(null!=e?u(e,"newLicenseUrl"):e))?s:i)===c?s.call(o,{name:"newLicenseUrl",hash:{},data:a,loc:{start:{line:16,column:19},end:{line:16,column:36}}}):s)+'" target="_blank">'+r(typeof(s=null!=(s=u(n,"newLicense")||(null!=e?u(e,"newLicense"):e))?s:i)===c?s.call(o,{name:"newLicense",hash:{},data:a,loc:{start:{line:16,column:54},end:{line:16,column:68}}}):s)+"</a></td>\n\t\t\t\t\t</tr>\n"},4:function(t,e,n,l,a){var s,o=null!=e?e:t.nullContext||{},i=t.hooks.helperMissing,r=t.escapeExpression,c="function",u=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return"\t\t\t\t\t<tr>\n\t\t\t\t\t\t<th>"+r((u(n,"intlMessage")||e&&u(e,"intlMessage")||i).call(o,{name:"intlMessage",hash:{intlName:"photo-page-scrappy.ORIGINAL_LICENSE"},data:a,loc:{start:{line:20,column:10},end:{line:20,column:72}}}))+'</th>\n\t\t\t\t\t\t<td><a href="'+r(typeof(s=null!=(s=u(n,"oldLicenseUrl")||(null!=e?u(e,"oldLicenseUrl"):e))?s:i)===c?s.call(o,{name:"oldLicenseUrl",hash:{},data:a,loc:{start:{line:21,column:19},end:{line:21,column:36}}}):s)+'" target="_blank">'+r(typeof(s=null!=(s=u(n,"oldLicense")||(null!=e?u(e,"oldLicense"):e))?s:i)===c?s.call(o,{name:"oldLicense",hash:{},data:a,loc:{start:{line:21,column:54},end:{line:21,column:68}}}):s)+"</a></td>\n\t\t\t\t\t</tr>\n"},compiler:[8,">= 4.3.0"],main:function(t,e,n,l,a){var s,o=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'<div class="license-history">\n\t<div class="license-history-modal-table-div">\n\t\t<table class="unfluid license-history-table" align="left">\n'+(null!=(s=o(n,"each").call(null!=e?e:t.nullContext||{},null!=e?o(e,"licenses"):e,{name:"each",hash:{},fn:t.program(1,a,0),inverse:t.noop,data:a,loc:{start:{line:4,column:3},end:{line:24,column:12}}}))?s:"")+"\t\t</table>\n\t</div>\n</div>\n"},useData:!0}),l={};t.Array.each([],(function(e){var n=t.Template.get("hermes/"+e);n&&(l[e]=n)})),t.Template.register("hermes/license-history",(function(e,a){return(a=a||{}).partials=a.partials?t.merge(l,a.partials):l,n(e,a)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("flickr-photo-license-history-fetcher",(function(e,s){"use strict";e.namespace("ModelFetchers")["flickr-photo-license-history"]={run:function(r,o){const i=this,t=this._processParams(r,o);return e.Promise.all([o.callAPI("flickr.photos.licenses.getLicenseHistory",t),o.getModelRegistry("photo-license-history-models")]).then((function(e){return i._processResponse(e,r,o)}),e.FetcherErrorLogger(s))},_processParams:function(e){return{photo_id:e.id}},_processResponse:function(e,s){const r=e[0],o=e[1],i={id:s.id,licenseHistory:r.license_history};return o.addOrUpdate(i),r}}}),"@VERSION@",{requires:["flickr-promise","api-helper"],optional:[]});
YUI.add("hermes-template-featured-toast",(function(e,r){var t=e.Template.Handlebars.revive({compiler:[8,">= 4.3.0"],main:function(e,r,t,a,n){var l=e.lookupProperty||function(e,r){if(Object.prototype.hasOwnProperty.call(e,r))return e[r]};return'<div class="featured-toast">\n\t'+e.escapeExpression((l(t,"renderTrustedMarkup")||r&&l(r,"renderTrustedMarkup")||e.hooks.helperMissing).call(null!=r?r:e.nullContext||{},null!=r?l(r,"htmlContent"):r,{name:"renderTrustedMarkup",hash:{},data:n,loc:{start:{line:2,column:1},end:{line:2,column:36}}}))+"\n</div>\n"},useData:!0}),a={};e.Array.each([],(function(r){var t=e.Template.get("hermes/"+r);t&&(a[r]=t)})),e.Template.register("hermes/featured-toast",(function(r,n){return(n=n||{}).partials=n.partials?e.merge(a,n.partials):a,t(r,n)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("featured-toast-view",(function(t){t.FlickrView.create(this.name,t.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(t){this.params=t,this.config=t.featuredToastConfig||{},this.config.id=this.config.id||"",this.config.htmlContent=this.config.htmlContent||"",this.config.showOnActivate=void 0!==this.config.showOnActivate&&this.config.showOnActivate,this.config.classList=this.config.classList||[],this.config.closeButton=this.config.closeButton||!1},loadState:function(){return t.Promise.resolve()},buildContainer:function(){this.setContainerWithTemplate("featured-toast",{htmlContent:this.config.htmlContent,classList:this.config.classList})},activate:function(){var i=this,n=this.get("container");return this.contentContainer=n.one(".featured-toast"),this.initialClasses=Array.prototype.slice.call(this.contentContainer.getDOMNode().classList),this.updateClasses(),this.setupEvents(),this.config.showOnActivate&&setTimeout((function(){i.show()}),0),setTimeout((function(){i.applyBannerOffset()}),100),this.registerEventHandler(t.on("resize",t.betterThrottle(this.applyBannerOffset.bind(this),500,this,!0))),this.fire("activated"),this},show:function(){this.get("container").addClass("activated")},dismiss:function(){var t=this.get("container");t.setStyle("bottom",null),t.removeClass("activated")},handlePrimaryActionClick:function(t){t.preventDefault(),t.stopPropagation(),this.fire("primaryActionClicked",{clickEvent:t})},handleSecondaryActionClick:function(t){t.preventDefault(),t.stopPropagation(),this.fire("secondaryActionClicked",{clickEvent:t})},handleCancelButtonClick:function(t){t.preventDefault(),t.stopPropagation(),this.fire("closeButtonClicked",{clickEvent:t})},applyBannerOffset:function(){var i,n=t.one(".footer-banner-view .footer-container");n&&(i=n.get("clientHeight"),this.get("container").setStyle("bottom",i))},setup:function(t){this.config.htmlContent=t.htmlContent||"",this.config.classList=t.classList||[],this.contentContainer.set("innerHTML",this.config.htmlContent),this.updateClasses(),this.setupEvents()},updateClasses:function(){var t=this;this.contentContainer.set("className",""),this.initialClasses.forEach((function(i){t.contentContainer.addClass(i)})),this.config.classList.forEach((function(i){t.contentContainer.addClass(i)}))},setupEvents:function(){var t=this.get("container"),i=t.one(".primary-action"),n=t.one(".secondary-action");let e=t.one(".close-x-button");i&&i.on("click",this.handlePrimaryActionClick.bind(this)),n&&n.on("click",this.handleSecondaryActionClick.bind(this)),e&&e.on("click",this.handleCancelButtonClick.bind(this))}})}),"@VERSION@",{requires:["flickr-view","hermes-template-featured-toast"]});YUI.add("user-limits-helper",(function(e){var t=e.config.flickr.account.photo_limit,i=e.config.flickr.account.near_photo_limit,n=e.config.flickr.account.content_warning_till_deletion_delta;e.UserLimitsHelper={isNearUploadLimit:function(e,n){return n.getViewer().signedIn&&!n.getViewer().isPro&&e.getValue("photoCount")>=i&&e.getValue("photoCount")<t},isAtUploadLimit:function(e,i){return i.getViewer().signedIn&&!i.getViewer().isPro&&e.getValue("photoCount")===t},isOverUploadLimit:function(e,i){return i.getViewer().signedIn&&!i.getViewer().isPro&&e.getValue("photoCount")>t},isOverARRLimit:function(e,i){return i.getViewer().signedIn&&!i.getViewer().isPro&&this.getARRCount(e)>t},hasReachedNearUploadLimit:function(e,t){return this.isNearUploadLimit(e,t)||this.isAtUploadLimit(e,t)||this.isOverUploadLimit(e,t)},hasReachedUploadLimit:function(e,t){return this.isAtUploadLimit(e,t)||this.isOverUploadLimit(e,t)},remainingAvailableUploads:function(e,t){return t.getValue("uploadLimit")-e.getValue("photoCount")},getARRCount:function(e){var t=e.getValue("arrPhotoCount");return t>=0?t:e.getValue("photoCount")},hasBeenWarnedAboutContentDeletion:function(e,t){var i=t.getViewer().signedIn&&!t.getViewer().isPro,n=Number(e.getValue("contentRemovalWarnDate").format("X"));return 0!==n&&(i&&!Number.isNaN(n))},getDaysLeftBeforeContentDeletion:function(t,i){if(this.hasBeenWarnedAboutContentDeletion(t,i)){var o=e.moment().diff(t.getValue("contentRemovalWarnDate"),"days");return Math.max(n-o,0)}return Number.MAX_SAFE_INTEGER},hasReachedContentDeletionDate:function(e,t){return this.getDaysLeftBeforeContentDeletion(e,t)<=0},isSuspended:function(e,t){var i=t.getViewer().signedIn&&!t.getViewer().isPro,n=e.getValue("suspensionFlag");return i&&n>0}}}),"@VERSION@",{requires:["moment"]});YUI.add("html-file-dragdrop",(function(e){"use strict";var r="htmlFileDragDrop",o=r+"-drag-over",t=r+"-error",i=["image/png","image/jpeg"];e.HtmlFileDragDrop=function(r){e.config.win.File&&e.config.win.FileList&&e.config.win.FileReader&&r.dropZone&&(this.dropZone=e.one(r.dropZone),this.dropZone.on("dragover",this.handleDragOver.bind(this)),this.dropZone.on("dragleave",this.handleDragLeave.bind(this)),this.dropZone.on("drop",this.handleDrop.bind(this)))},e.HtmlFileDragDrop.prototype.reset=function(){this.dropZone.removeClass(t),this.dropZone.removeClass(o)},e.HtmlFileDragDrop.prototype.handleDragOver=function(e){e.halt(),this.reset(),this.dropZone.addClass(o)},e.HtmlFileDragDrop.prototype.handleDragLeave=function(e){e.halt(),this.reset()},e.HtmlFileDragDrop.prototype.showError=function(){this.dropZone.addClass(t)},e.HtmlFileDragDrop.prototype.handleDrop=function(e){var r;if(e.halt(),this.dropZone.removeClass(o),e._event.dataTransfer.files.length>1)return this.dropZone.addClass(t),void this.fire("drop",new Error("FILE_COUNT"));if((r=e._event.dataTransfer.files[0])&&r.name){if(i.indexOf(r.type)<0)return void this.fire("drop",new Error("FILE_TYPE"));this.fire("drop",r)}},e.augment(e.HtmlFileDragDrop,e.EventTarget,!0,null,{prefix:r})}),"@VERSION@",{affinity:"",requires:["event-custom"],optional:[]});YUI.add("hermes-template-photo-selector",(function(t,n){var l=t.Template.Handlebars.revive({1:function(t,n,l,e,a){return'\t\t<div class="photo-selector-search-list-yours">\n\t\t\t<div class="photo-selector-search-list">\n\t\t\t\t<div class="photo-selector-search-list-container">\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n'},3:function(t,n,l,e,a){return'\t\t<div class="photo-selector-search-list-contacts">\n\t\t\t<div class="photo-selector-search-list">\n\t\t\t\t<div class="photo-selector-search-list-container">\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n'},5:function(t,n,l,e,a){return'\t\t<div class="photo-selector-search-list-everyone">\n\t\t\t<div class="photo-selector-search-list">\n\t\t\t\t<div class="photo-selector-search-list-container">\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n'},7:function(t,n,l,e,a){return'\t\t<div class="photo-selector-search-list-marketplace"\n\t\t\t<div class="photo-selector-search-list">\n\t\t\t\t<div class="photo-selector-search-list-container">\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n'},9:function(t,n,l,e,a){var s,o=t.lookupProperty||function(t,n){if(Object.prototype.hasOwnProperty.call(t,n))return t[n]};return'<div class="photo-selector-upload is-hiding">\n'+(null!=(s=o(l,"if").call(null!=n?n:t.nullContext||{},null!=n?o(n,"canUpload"):n,{name:"if",hash:{},fn:t.program(10,a,0),inverse:t.program(12,a,0),data:a,loc:{start:{line:60,column:1},end:{line:78,column:8}}}))?s:"")+"</div>\n"},10:function(t,n,l,e,a){var s=null!=n?n:t.nullContext||{},o=t.hooks.helperMissing,i=t.escapeExpression,c=t.lookupProperty||function(t,n){if(Object.prototype.hasOwnProperty.call(t,n))return t[n]};return'\t\t<p class="upload-error"></p>\n\t\t<div class="drop-zone">\n\t\t\t<div class="drop-zone-content">\n\t\t\t\t<div class="balls"></div>\n\t\t\t\t<input type="file" class="file-select" name="file-select" accept="image/jpeg, image/png" />\n\t\t\t\t<p><i class="upload-icon"></i>'+i((c(l,"intlHTMLMessage")||n&&c(n,"intlHTMLMessage")||o).call(s,{name:"intlHTMLMessage",hash:{intlName:"wallart.DRAG_DROP_TO_UPLOAD"},data:a,loc:{start:{line:66,column:34},end:{line:66,column:92}}}))+"</p>\n\t\t\t\t<p>"+i((c(l,"intlHTMLMessage")||n&&c(n,"intlHTMLMessage")||o).call(s,{name:"intlHTMLMessage",hash:{intlName:"wallart.PHOTOS_UPLOADED_AS_PRIVATE"},data:a,loc:{start:{line:67,column:7},end:{line:67,column:72}}}))+'</p>\n\t\t\t</div>\n\t\t</div>\n\t\t<ul class="preview"></ul>\n'},12:function(t,n,l,e,a){var s=null!=n?n:t.nullContext||{},o=t.hooks.helperMissing,i=t.escapeExpression,c=t.lookupProperty||function(t,n){if(Object.prototype.hasOwnProperty.call(t,n))return t[n]};return'\t\t<div class="cant-upload">\n\t\t\t<div class="cant-upload-message">\n\t\t\t\t<span>'+i((c(l,"intlMessage")||n&&c(n,"intlMessage")||o).call(s,{name:"intlMessage",hash:{limitCount:(c(l,"intlNumber")||n&&c(n,"intlNumber")||o).call(s,1e3,{name:"intlNumber",hash:{},data:a,loc:{start:{line:74,column:89},end:{line:74,column:106}}}),intlName:"upload-blocking.YOUVE_REACHED_UPLOAD_LIMIT"},data:a,loc:{start:{line:74,column:10},end:{line:74,column:108}}}))+'</span>\n\t\t\t\t<a href="/account/upgrade/pro/">'+i((c(l,"intlMessage")||n&&c(n,"intlMessage")||o).call(s,{name:"intlMessage",hash:{intlName:"common.GET_PRO"},data:a,loc:{start:{line:75,column:36},end:{line:75,column:77}}}))+"</a>\n\t\t\t</div>\n\t\t</div>\n"},14:function(t,n,l,e,a){return'<div class="group-photo-selector-photos-wrapper">\n\t<div class="group-photo-selector-photos photo-selector-photos">\n\t\t<div class="group-photo-selector-photos-container">\n\t\t</div>\n\t</div>\n</div>\n'},compiler:[8,">= 4.3.0"],main:function(t,n,l,e,a){var s,o=null!=n?n:t.nullContext||{},i=t.hooks.helperMissing,c=t.escapeExpression,r=t.lookupProperty||function(t,n){if(Object.prototype.hasOwnProperty.call(t,n))return t[n]};return c((r(l,"outlet")||n&&r(n,"outlet")||i).call(o,null!=n?r(n,"fluid-modal-nav-bar-view"):n,{name:"outlet",hash:{},data:a,loc:{start:{line:1,column:0},end:{line:1,column:35}}}))+'\n\n<div class="photo-selector-title-bar hidden">\n\t<div class="back-to-list">\n\t\t<div class="back-to-list-icon"><svg class="icon icon-back"><use xlink:href="#icon-back"></use></svg></div>\n\t\t<div class="back-to-list-text">'+c((r(l,"intlMessage")||n&&r(n,"intlMessage")||i).call(o,{name:"intlMessage",hash:{intlName:"common.PHOTO_SELECTOR_BACK_TO_ALBUM_LIST"},data:a,loc:{start:{line:6,column:33},end:{line:6,column:100}}}))+'</div>\n\t</div>\n\t<div class="title"></div>\n</div>\n\n<div class="photo-selector-photos-wrapper">\n\t<div class="photo-selector-photos">\n\t\t<div class="photo-selector-photos-container">\n\t\t\t<div class="loader"><div class="balls"></div></div>\n\t\t</div>\n\t</div>\n</div>\n\n\n<div class="photo-selector-search-lists-wrapper is-hiding">\n'+(null!=(s=r(l,"if").call(o,null!=(s=null!=n?r(n,"searchable"):n)?r(s,"yours"):s,{name:"if",hash:{},fn:t.program(1,a,0),inverse:t.noop,data:a,loc:{start:{line:21,column:1},end:{line:28,column:8}}}))?s:"")+"\n"+(null!=(s=r(l,"if").call(o,null!=(s=null!=n?r(n,"searchable"):n)?r(s,"contacts"):s,{name:"if",hash:{},fn:t.program(3,a,0),inverse:t.noop,data:a,loc:{start:{line:30,column:1},end:{line:37,column:8}}}))?s:"")+"\n"+(null!=(s=r(l,"if").call(o,null!=(s=null!=n?r(n,"searchable"):n)?r(s,"everyone"):s,{name:"if",hash:{},fn:t.program(5,a,0),inverse:t.noop,data:a,loc:{start:{line:39,column:1},end:{line:46,column:8}}}))?s:"")+"\n"+(null!=(s=r(l,"if").call(o,null!=(s=null!=n?r(n,"searchable"):n)?r(s,"marketplace"):s,{name:"if",hash:{},fn:t.program(7,a,0),inverse:t.noop,data:a,loc:{start:{line:48,column:1},end:{line:55,column:8}}}))?s:"")+"</div>\n\n"+(null!=(s=r(l,"if").call(o,null!=n?r(n,"hasUploadCapabilities"):n,{name:"if",hash:{},fn:t.program(9,a,0),inverse:t.noop,data:a,loc:{start:{line:58,column:0},end:{line:80,column:7}}}))?s:"")+"\n"+(null!=(s=r(l,"if").call(o,null!=n?r(n,"hasGroupCapabilities"):n,{name:"if",hash:{},fn:t.program(14,a,0),inverse:t.noop,data:a,loc:{start:{line:82,column:0},end:{line:89,column:7}}}))?s:"")+"\n"+c((r(l,"outlet")||n&&r(n,"outlet")||i).call(o,null!=n?r(n,"basic-confirm-actions-view"):n,{name:"outlet",hash:{},data:a,loc:{start:{line:91,column:0},end:{line:91,column:37}}}))+"\n"},useData:!0}),e={};t.Array.each([],(function(n){var l=t.Template.get("hermes/"+n);l&&(e[n]=l)})),t.Template.register("hermes/photo-selector",(function(n,a){return(a=a||{}).partials=a.partials?t.merge(e,a.partials):e,l(n,a)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("hermes-template-photo-selector-photolist-subview",(function(e,t){var l=e.Template.Handlebars.revive({compiler:[8,">= 4.3.0"],main:function(e,t,l,r,a){var o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return e.escapeExpression((o(l,"outlet")||t&&o(t,"outlet")||e.hooks.helperMissing).call(null!=t?t:e.nullContext||{},null!=t?o(t,"photo-list-view"):t,{name:"outlet",hash:{},data:a,loc:{start:{line:1,column:0},end:{line:1,column:26}}}))},useData:!0}),r={};e.Array.each([],(function(t){var l=e.Template.get("hermes/"+t);l&&(r[t]=l)})),e.Template.register("hermes/photo-selector-photolist-subview",(function(t,a){return(a=a||{}).partials=a.partials?e.merge(r,a.partials):r,l(t,a)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("photo-selector-photolist-view",(function(e){e.namespace("Views")[this.name]=e.Base.create(this.name,e.FlickrView,[],{initializer:function(i){return i.photolistViewClasses&&(i.additionalViewClasses=i.photolistViewClasses),i.photoListConfig=e.merge(i.primaryPhotoListConfig),i.publicOnlyPhotos=i.publicOnlyPhotos,""===this.get("container").get("innerHTML")&&this.setContainerHTML(""),this},subviewConfig:{"photo-list-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0}},buildContainer:function(){return this.setContainerWithTemplate("photo-selector-photolist-subview"),this}})}),"@VERSION@",{requires:["flickr-view","photo-list-view","hermes-template-photo-selector-photolist-subview"]});
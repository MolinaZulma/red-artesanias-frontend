YUI.add("hermes-lang-album-page_es-us",(function(e,a){e.Intl.add("hermes/album-page","es-US",{PHOTOS_COUNT:[{type:6,value:"selectedCount",options:{one:{value:[{type:7},{type:0,value:" foto"}]},other:{value:[{type:7},{type:0,value:" fotos"}]}},offset:0,pluralType:"cardinal"}],PUBLIC_PHOTOS_COUNT:[{type:6,value:"selectedCount",options:{one:{value:[{type:7},{type:0,value:" foto pública"}]},other:{value:[{type:7},{type:0,value:" fotos públicas"}]}},offset:0,pluralType:"cardinal"}],PUBLIC_ITEMS_COUNT:[{type:6,value:"selectedCount",options:{one:{value:[{type:7},{type:0,value:" elemento público"}]},other:{value:[{type:7},{type:0,value:" elementos públicos"}]}},offset:0,pluralType:"cardinal"}],VIDEOS_COUNT:[{type:6,value:"selectedCount",options:{one:{value:[{type:7},{type:0,value:" video"}]},other:{value:[{type:7},{type:0,value:" videos"}]}},offset:0,pluralType:"cardinal"}],VIEWS_COUNT:[{type:6,value:"selectedCount",options:{one:{value:[{type:7},{type:0,value:" vista"}]},other:{value:[{type:7},{type:0,value:" vistas"}]}},offset:0,pluralType:"cardinal"}],BACK_TO_ALBUMS:[{type:0,value:"Volver a la lista de álbumes"}],EDIT_IN_ORGANIZR:[{type:0,value:"Editar en Organizr"}],EDIT_COVER:[{type:0,value:"Editar portada"}],SELECT_COVER_PHOTO:[{type:0,value:"Seleccionar una foto para la portada"}],SELECT:[{type:0,value:"Seleccionar"}],ERROR_COVER_PHOTO:[{type:0,value:"Ocurrió un problema al intentar establecer tu foto de portada. Vuelve a intentarlo."}],ERROR_UPDATING_ALBUM_TITLE_DESCRIPTION:[{type:0,value:"Se produjo un error al actualizar el título y la descripción del álbum."}],ALBUM_ADD_DESCRIPTION:[{type:0,value:"Hacer clic aquí para escribir una descripción para este álbum"}],ERROR_CREATING_PHOTOBOOK_FROM_ALBUM:[{type:0,value:"Ocurrió un problema al crear el libro para este álbum. Inténtalo de nuevo más tarde."}],ALBUM_DESCRIPTION:[{type:0,value:"Descripción del álbum"}],CREATE_BOOK_FROM_ALBUM:[{type:0,value:"Crear un libro a partir de este álbum"}],DOWNLOAD_PHOTOS_AND_VIDEO:[{type:0,value:"Descargar "},{type:6,value:"photoCount",options:{one:{value:[{type:7},{type:0,value:" foto"}]},other:{value:[{type:7},{type:0,value:" fotos"}]}},offset:0,pluralType:"cardinal"},{type:0,value:" y "},{type:6,value:"videoCount",options:{one:{value:[{type:7},{type:0,value:" video"}]},other:{value:[{type:7},{type:0,value:" videos"}]}},offset:0,pluralType:"cardinal"}],DOWNLOAD_PHOTOS:[{type:0,value:"Descargar "},{type:6,value:"photoCount",options:{one:{value:[{type:7},{type:0,value:" foto"}]},other:{value:[{type:7},{type:0,value:" fotos"}]}},offset:0,pluralType:"cardinal"}],DOWNLOAD_VIDEOS:[{type:0,value:"Descargar "},{type:6,value:"videoCount",options:{one:{value:[{type:7},{type:0,value:" video"}]},other:{value:[{type:7},{type:0,value:" videos"}]}},offset:0,pluralType:"cardinal"}],DOWNLOAD_ZIP:[{type:0,value:"Descargar zip"}],DOWNLOAD_ZIP_PART:[{type:0,value:"Descargar parte "},{type:1,value:"partSequence"},{type:0,value:" del zip"}],ALOT_OF_PHOTOS:[{type:0,value:"¡Wow, son muchas fotos! Haz clic para descargar cada lote como archivo .zip."}],DOWNLOAD_ALBUM_NOT_AVAILABLE_ERROR:[{type:0,value:"No hay fotos ni videos disponibles para descarga en este álbum."}],DOWNLOAD_ALBUM_DISABLED_ERROR:[{type:0,value:"La descarga del álbum no está disponible en este momento. Vuelve a intentarlo en unos minutos."}],DOWNLOAD_ALBUM_GENERIC_ERROR:[{type:0,value:"Ocurrió un error al descargar este álbum. Vuelve a intentarlo."}],DOWNLOAD_ALBUM_LICENSE_MESSAGE:[{type:0,value:"Es posible que estas fotos tengan uno o más tipos de licencia. Visita la página específica de la foto para obtener más información sobre la licencia antes de descargar este álbum."}],DOWNLOAD_ALBUM_LICENSE_MESSAGE_ALT:[{type:0,value:"Es posible que estas fotos tengan uno o más tipos de licencia. Antes de descargar este álbum, visita las páginas de fotos individuales para conocer el tipo de licencia designada para cada imagen."}],DOWNLOAD_ALBUM_LICENSE_MESSAGE_ALT_2:[{type:0,value:"Es posible que estas fotos tengan uno o más tipos de licencia o que sus derechos estén reservados. Antes de descargar este álbum, visita las páginas de fotos individuales para conocer el tipo de licencia designada para cada imagen."}],DOWNLOAD_ALBUM_LEARN_MORE:[{type:0,value:'Más información en <a href="https://www.flickr.com/creativecommons" target="_blank">Creative Commons</a>'}],CONFIRM_ALBUM_DELETE_NO_CONTENTS_DELETED:[{type:0,value:"¿Realmente quieres borrar este álbum? (No te preocupes, no se borrará su contenido)."}],DELETE_THIS_ALBUM:[{type:0,value:"Borrar este álbum"}],SHARE_THIS_ALBUM:[{type:0,value:"Compartir este álbum"}],CREATE_NEW_ALBUM:[{type:0,value:"Crear un álbum nuevo"}],NEW_ALBUM:[{type:0,value:"Nuevo álbum"}],NEW_COLLECTION:[{type:0,value:"Nueva colección"}],VIEW_COLLECTIONS:[{type:0,value:"Ver colecciones"}],VIEW_MY_COLLECTIONS:[{type:0,value:"Ver mis colecciones"}],SORT:[{type:0,value:"Clasificar"}],SORT_DATE_TAKEN_OLDEST:[{type:0,value:"Ordenar por fecha en que se tomó (la más antigua primero)"}],SORT_DATE_TAKEN_NEWEST:[{type:0,value:"Ordenar por fecha en que se tomó (la más nueva primero)"}],SORT_DATE_UPLOADED_OLDEST:[{type:0,value:"Ordenar por fecha de carga (la más antigua primero)"}],SORT_DATE_UPLOADED_NEWEST:[{type:0,value:"Ordenar por fecha de carga (la más nueva primero)"}],SORT_ALPHABETICALLY:[{type:0,value:"Alfabético"}],SORT_RANDOMLY:[{type:0,value:"Aleatorio"}],SORT_REVERSE:[{type:0,value:"Invertir orden actual"}],SORT_ALMOST_DONE:[{type:0,value:"Ya está casi listo…"}],TIMEOUT_FAILURE:[{type:0,value:"En este momento, estamos teniendo problemas para mostrar este álbum. Vuelve a intentarlo."}],OPENGRAPH_DESCRIPTION:[{type:0,value:"¡Explora este álbum de fotos de "},{type:1,value:"owner"},{type:0,value:" en Flickr!"}],EDIT_ALBUM:[{type:0,value:"Editar álbum"}],DELETE_ALBUM:[{type:0,value:"Eliminar álbum"}],DELETE_ALBUM_CONFIRMATION:[{type:0,value:"¿Estás seguro de que deseas eliminar este álbum?"}],REMOVE_PHOTO_TITLE:[{type:0,value:"Eliminar foto"}],REMOVE_PHOTO_MESSAGE:[{type:0,value:"¿Estás seguro de que desear eliminar esta foto del álbum?"}],SORT_TYPE_LABEL:[{type:0,value:"Ordenar:"}],SORT_TAKEN_OLDEST:[{type:0,value:"Fecha de adquisición (más antiguo primero)"}],SORT_TAKEN_NEWEST:[{type:0,value:"Fecha de adquisición (más reciente primero)"}],SORT_UPLOADED_OLDEST:[{type:0,value:"Fecha de carga (más antiguo primero)"}],SORT_UPLOADED_NEWEST:[{type:0,value:"Fecha de carga (más reciente primero)"}],SORT_RANDOM:[{type:0,value:"Aleatorio"}],SORT_MANUAL_BEGINNING:[{type:0,value:"Manual (agregar al inicio)"}],SORT_MANUAL_END:[{type:0,value:"Manual (agregar al final)"}],SORT_ALBUM_TOOLTIP:[{type:0,value:"Los elementos que añadas a este álbum se ordenarán según el orden de clasificación."}],SORT_ALPHABETICAL:[{type:0,value:"Por orden alfabético"}],X_OF_Y_ITEMS_ADDED_TO_ALBUM:[{type:1,value:"successCountString"},{type:0,value:" de "},{type:1,value:"totalCountString"},{type:0,value:" elementos se agregaron al álbum"}],X_ITEMS_ALREADY_IN_ALBUM:[{type:1,value:"countString"},{type:0,value:" de los elementos que seleccionaste ya están en el álbum."}],X_ITEMS_NOT_ADDED_TO_ALBUM:[{type:6,value:"count",options:{one:{value:[{type:1,value:"countString"},{type:0,value:" elemento no fue"}]},other:{value:[{type:1,value:"countString"},{type:0,value:" elementos no fueron"}]}},offset:0,pluralType:"cardinal"},{type:0,value:" agregados por otras razones. Por favor, intenta agregarlos de nuevo."}],THAT_ALREADY_IN_ALBUM:[{type:0,value:"Ese elemento ya está en el álbum."}],THOSE_ALREADY_IN_ALBUM:[{type:0,value:"Esos elementos ya están en el álbum."}],CHANGE_SORT_ORDER_TITLE:[{type:0,value:"Change sort order?"}],CHANGE_SORT_ORDER_EXPLANATION:[{type:0,value:"If you change the way this album is sorted, your manual sort order will be lost."}]})}),"@VERSION@",{requires:["intl"]});YUI.add("hermes-template-fluid-modal-nav-bar",(function(n,l){var e=n.Template.Handlebars.revive({1:function(n,l,e,a,t){var o,r=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return null!=(o=r(e,"unless").call(null!=l?l:n.nullContext||{},null!=l?r(l,"disabled"):l,{name:"unless",hash:{},fn:n.program(2,t,0),inverse:n.noop,data:t,loc:{start:{line:5,column:3},end:{line:7,column:14}}}))?o:""},2:function(n,l,e,a,t){var o,r,u=null!=l?l:n.nullContext||{},i=n.hooks.helperMissing,c="function",s=n.escapeExpression,m=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return'\t\t\t<li data-id="'+s(typeof(r=null!=(r=m(e,"id")||(null!=l?m(l,"id"):l))?r:i)===c?r.call(u,{name:"id",hash:{},data:t,loc:{start:{line:6,column:16},end:{line:6,column:22}}}):r)+'" data-value="'+s(typeof(r=null!=(r=m(e,"value")||(null!=l?m(l,"value"):l))?r:i)===c?r.call(u,{name:"value",hash:{},data:t,loc:{start:{line:6,column:36},end:{line:6,column:45}}}):r)+'" '+(null!=(o=m(e,"if").call(u,null!=l?m(l,"searchPillConfig"):l,{name:"if",hash:{},fn:n.program(3,t,0),inverse:n.noop,data:t,loc:{start:{line:6,column:47},end:{line:6,column:113}}}))?o:"")+' class="link '+(null!=(o=m(e,"if").call(u,null!=l?m(l,"selected"):l,{name:"if",hash:{},fn:n.program(5,t,0),inverse:n.noop,data:t,loc:{start:{line:6,column:126},end:{line:6,column:157}}}))?o:"")+" "+(null!=(o=m(e,"if").call(u,null!=l?m(l,"hiddenByDefault"):l,{name:"if",hash:{},fn:n.program(7,t,0),inverse:n.noop,data:t,loc:{start:{line:6,column:158},end:{line:6,column:194}}}))?o:"")+'" tabindex="0"><a data-value="'+s(typeof(r=null!=(r=m(e,"value")||(null!=l?m(l,"value"):l))?r:i)===c?r.call(u,{name:"value",hash:{},data:t,loc:{start:{line:6,column:224},end:{line:6,column:233}}}):r)+'">'+s(typeof(r=null!=(r=m(e,"name")||(null!=l?m(l,"name"):l))?r:i)===c?r.call(u,{name:"name",hash:{},data:t,loc:{start:{line:6,column:235},end:{line:6,column:243}}}):r)+"</a></li>\n"},3:function(n,l,e,a,t){var o,r=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return'data-context="'+n.escapeExpression("function"==typeof(o=null!=(o=r(e,"searchPillConfig")||(null!=l?r(l,"searchPillConfig"):l))?o:n.hooks.helperMissing)?o.call(null!=l?l:n.nullContext||{},{name:"searchPillConfig",hash:{},data:t,loc:{start:{line:6,column:85},end:{line:6,column:105}}}):o)+'"'},5:function(n,l,e,a,t){return"selected"},7:function(n,l,e,a,t){return"hidden"},9:function(n,l,e,a,t){return'\t\t\t<form action="/search" method="get" role="search">\n\t\t\t\t<input type="submit" class="search-icon" tabindex="-1" aria-label="Search" role="button">\n\t\t\t\t<ul class="search-pillbox"></ul>\n\t\t\t\t<input type="text" name="text" value="" class="search-field" autocomplete="off" aria-label="Search" role="textbox">\n\t\t\t</form>\n'},11:function(n,l,e,a,t){return'\t\t\t<span role="button" class="close-x-button">\n\t\t\t\t<svg class="icon icon-close"><use xlink:href="#icon-close"></use></svg>\n\t\t\t</span>\n'},compiler:[8,">= 4.3.0"],main:function(n,l,e,a,t){var o,r=null!=l?l:n.nullContext||{},u=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return'<div class="fluid-modal-nav-bar">\n\t<div class="fluid-modal-nav-content">\n\t\t<ul class="links">\n'+(null!=(o=u(e,"each").call(r,null!=l?u(l,"links"):l,{name:"each",hash:{},fn:n.program(1,t,0),inverse:n.noop,data:t,loc:{start:{line:4,column:2},end:{line:8,column:11}}}))?o:"")+"\t\t</ul>\n"+(null!=(o=u(e,"if").call(r,null!=l?u(l,"enableSearch"):l,{name:"if",hash:{},fn:n.program(9,t,0),inverse:n.noop,data:t,loc:{start:{line:10,column:2},end:{line:16,column:9}}}))?o:"")+(null!=(o=u(e,"if").call(r,null!=l?u(l,"showCloseXButton"):l,{name:"if",hash:{},fn:n.program(11,t,0),inverse:n.noop,data:t,loc:{start:{line:17,column:2},end:{line:21,column:9}}}))?o:"")+"\t</div>\n</div>\n"},useData:!0}),a={};n.Array.each([],(function(l){var e=n.Template.get("hermes/"+l);e&&(a[l]=e)})),n.Template.register("hermes/fluid-modal-nav-bar",(function(l,t){return(t=t||{}).partials=t.partials?n.merge(a,t.partials):a,e(l,t)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("fluid-modal-nav-bar-view",(function(e){"use strict";var t;t={css:{nav:".fluid-modal-nav-bar",navContent:".fluid-modal-nav-content",links:".links",link:".link"},options:{}},e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){var t,i,n=this.get("breakpointConfig")||[],s=this.appContext.viewportData.getWidth();for(this.set("showCloseXButton",void 0===e.showCloseXButton||e.showCloseXButton),this.set("onClose",void 0!==e.onClose?e.onClose:async e=>{}),i=n.sort((function(e,t){return e.maxWidth-t.maxWidth})),t=0;t<i.length;t++)if(s<i[t].maxWidth){this.mobileConfig=i[t],this.set("links",this.mobileConfig.links),this.set("enableSearch",this.mobileConfig.enableSearch);break}return this.set("contextToString",{photos:this.intlMessage({intlName:"groups.PHOTOS"}),photostream:this.intlMessage({intlName:"groups.PHOTOS"}),favorites:this.intlMessage({intlName:"common.FAVORITES"}),faves:this.intlMessage({intlName:"common.FAVORITES"}),albums:this.intlMessage({intlName:"common.ALBUMS"}),everyone:this.intlMessage({intlName:"search.EVERYONE"}),contacts:this.intlMessage({intlName:"search.PEOPLE_YOU_FOLLOW"}),peopleYouFollow:this.intlMessage({intlName:"search.PEOPLE_YOU_FOLLOW"}),discussions:this.intlMessage({intlName:"groups.DISCUSSIONS_LINK_LABEL"}),commons:this.intlMessage({intlName:"commons.THE_COMMONS"})}),this},loadState:function(){return this},buildContainer:function(){var e;return e={links:this.get("links"),enableSearch:this.get("enableSearch"),showCloseXButton:this.get("showCloseXButton")},this.setContainerWithTemplate("fluid-modal-nav-bar",e),this},activate:function(){var e=this.get("container"),t=this,i=e.one(".search-field");let n=e.one(".close-x-button");if(n&&this.registerEventHandler(n.on("click",(e=>{this.get("onClose")(e)}))),this.registerEventHandler(e.on("click",this.handleClick.bind(this))),this.registerEventHandler(e.on("key",this.handleClick.bind(this),"down:13")),this.get("links").forEach((function(i){i.selected&&t.set("currentSelection",e.one('.link[data-id="'+i.id+'"]'))})),this.defaultContext=this.get("links")[0].value,this.get("currentSelection").hasAttribute("data-context")){var s=JSON.parse(this.get("currentSelection").getAttribute("data-context"));this.addPill(s.pillName,this.get("contextToString")[s.scope]),this.registerEventHandler(i.on("key",this.handleSearchFieldKeydown.bind(this),"down:8"))}return this},deselectAll:function(){this.get("container").one(t.css.nav).one(t.css.navContent).one(t.css.links).all(t.css.link).removeClass("selected")},handleClick:function(t){var i,n,s=t.target,a=s.get("parentNode"),l=this.get("container"),r={},o=this.appContext.getViewer().nsid;if("a"===s.getDOMNode().tagName.toLowerCase())t.halt(),this.updateSelectionAndSearchField(a),this.fire("navigation",t);else if(s.hasClass("link"))t.halt(),this.updateSelectionAndSearchField(s),this.fire("navigation",t);else if(s.hasClass("search-pill-remover"))t.halt(),this.removeContext();else if(i=l.one(".search-field"),this.get("enableSearch")&&i&&(n=l.one(".search-field").getDOMNode(),"submit"===s.getDOMNode().type)){t.halt(),r.apiParams={},r.apiParams[e.AttributeHelpers.coerceString(n.name)]=n.value,r.id=e.SearchHelper.generateQueryString(r.apiParams)||e.guid(),r.viewerNsid=o;var h=this.get("currentSelection");h.hasAttribute("data-context")?r.contextSearch=h.getAttribute("data-id"):(this.deselectAll(),this.set("searchData",{type:"search",modelParams:r})),this.fire("search",r)}},reselectTab:function(){this.get("currentSelection")&&this.get("currentSelection").getDOMNode().click()},redoSearch:function(){var e=this.get("searchData");e&&"search"===e.type&&this.fire("search",e.modelParams)},addPill:function(t,i){var n,s={name:t};i&&(s.combo=!0,s.secondName=i),n=e.Node.create(this.templates("search-pill")(s)),this.get("container").one(".search-pillbox").appendChild(n)},removePills:function(){this.get("container").one(".search-pillbox").get("children").remove()},removeContext:function(){var t=this.get("container"),i=t.one(".search-field").getDOMNode(),n={},s=this.appContext.getViewer().nsid,a={},l=t.one('.link[data-id="'+this.defaultContext+'"]');this.removePills(),this.deselectAll(),l.addClass("selected"),this.set("currentSelection",l),a.target=l,i.value.length>0?(n.apiParams={},n.apiParams[e.AttributeHelpers.coerceString(i.name)]=i.value,n.id=e.SearchHelper.generateQueryString(n.apiParams)||e.guid(),n.viewerNsid=s,this.fire("search",n)):this.fire("navigation",a)},handleSearchFieldKeydown:function(t){var i=t.target;0===e.fluid.getTextFieldCursorPosition(i)&&""===e.fluid.getTextFieldSelection()&&this.removeContext()},updateSelectionAndSearchField:function(e){var t,i=this.get("container"),n=i.one(".search-field"),s=i.one(".search-pill");this.deselectAll(),e.addClass("selected"),this.set("currentSelection",e),this.get("currentSelection").hasAttribute("data-context")&&(t=JSON.parse(this.get("currentSelection").getAttribute("data-context"))),n&&(n.getDOMNode().value=""),t?s||this.addPill(t.pillName,this.get("contextToString")[t.scope]):s&&this.removePills()}},{ATTRS:{links:{value:[],validator:function(t){return e.Lang.isArray(t)}},currentSelection:{value:null},enableSearch:{value:!0,validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)}},breakpointConfig:{value:null}}})}),"@VERSION@",{requires:["flickr-view","flickr-promise","hermes-template-fluid-modal-nav-bar","hermes-template-search-pill","attribute-helpers","search-helper"],langBundles:["common","wallart","groups","search","commons"],optional:["person-models","photo-models"]});YUI.add("hermes-lang-wallart_es-us",(function(e,a){e.Intl.add("hermes/wallart","es-US",{WALL_ART:[{type:0,value:"Cuadros"}],YOU_CANCELLED_THIS_ITEM_ON_DATE:[{type:0,value:"Cancelaste el pedido de este artículo el "},{type:3,value:"date",style:"monthYear"},{type:0,value:"."}],YOU_ORDERED_THIS_ITEM_ON_DATE:[{type:0,value:"Hiciste el pedido de este artículo el "},{type:3,value:"date",style:"monthYear"},{type:0,value:"."}],RETURN_TO_YOUR_ORDER_HISTORY:[{type:0,value:"Volver a tu historial de pedidos"}],SELECT_A_PHOTO:[{type:0,value:"Seleccionar una foto"}],SELECT_PRODUCT:[{type:0,value:"Seleccionar producto"}],PHOTO_MOUNT:[{type:0,value:"Pósteres enmarcados"}],CANVAS:[{type:0,value:"Lienzo"}],CANVAS_WRAP:[{type:0,value:"Impresión en lienzo"}],PREMIUM_LUSTRE:[{type:0,value:"Con brillo de primera calidad"}],GLOSSY:[{type:0,value:"Satinado"}],MATTE:[{type:0,value:"Mate"}],SIZE:[{type:0,value:"Tamaño"}],CHECKOUT:[{type:0,value:"Finalizar compra"}],REORDER:[{type:0,value:"Cambiar el orden"}],TOTAL:[{type:0,value:"Total"}],UPLOAD:[{type:0,value:"Subir"}],CURATED_COLLECTIONS:[{type:0,value:"Colecciones destacadas"}],CREATIVE_COMMONS:[{type:0,value:"Creative Commons"}],NASA:[{type:0,value:"NASA"}],ABSTRACT:[{type:0,value:"Abstracto"}],ANIMALS:[{type:0,value:"Animales"}],PATTERNS:[{type:0,value:"Estampados"}],FOOD:[{type:0,value:"Comida"}],LANDSCAPES:[{type:0,value:"Paisajes"}],TRAVEL:[{type:0,value:"Viajes"}],MY_ALBUMS:[{type:0,value:"Mis álbumes"}],PRODUCT_DROPUP_CANVAS:[{type:0,value:'Impresión en lienzo profesional en marco de madera de 1,25"'}],PRODUCT_DROPUP_MOUNTED:[{type:0,value:'Papel fotográfico acabado con borde con textura de madera de 1"'}],MATERIAL_DROPUP_LUSTRE:[{type:0,value:"Professional Crystal Archive - Con brillo de primera calidad"}],MATERIAL_DROPUP_GLOSSY:[{type:0,value:"Professional Crystal Archive - Con brillo"}],MATERIAL_DROPUP_MATTE:[{type:0,value:"Professional Crystal Archive - Mate"}],SIZES_MODAL_SIZES_NOT_AVAILABLE:[{type:0,value:"Algunos tamaños no están disponibles debido a la resolución de la foto. Más información."}],MOUNTED_SAFE_AREA:[{type:0,value:"El área fuera de la línea sólida no se imprimirá. <br>Dentro de la línea está el área segura."}],CANVAS_SAFE_AREA:[{type:0,value:"El área fuera de la línea de puntos se imprimirá en el marco. <br>El área dentro de la línea se imprimirá en el frente."}],SAVING:[{type:0,value:"Guardando..."}],SAVED:[{type:0,value:"Se guardaron todos los cambios."}],WITH_CODE:[{type:0,value:"con el código:"}],FREE_SHIPPING_WITH_CODE:[{type:0,value:"Envío gratuito con el código:"}],PRODUCT_DESCRIPTION_CANVAS_PART_1_8X10:[{type:0,value:'Enmarcado de 8" × 10"'}],PRODUCT_DESCRIPTION_CANVAS_PART_1_10X8:[{type:0,value:'Enmarcado de 10" × 8"'}],PRODUCT_DESCRIPTION_CANVAS_PART_1_12X12:[{type:0,value:'Enmarcado de 12" × 12"'}],PRODUCT_DESCRIPTION_CANVAS_PART_1_11X14:[{type:0,value:'Enmarcado de 11" × 14"'}],PRODUCT_DESCRIPTION_CANVAS_PART_1_14X11:[{type:0,value:'Enmarcado de 14" × 11"'}],PRODUCT_DESCRIPTION_CANVAS_PART_1_16X20:[{type:0,value:'Enmarcado de 16" × 20"'}],PRODUCT_DESCRIPTION_CANVAS_PART_1_20X16:[{type:0,value:'Enmarcado de 20" × 16"'}],PRODUCT_DESCRIPTION_CANVAS_PART_1_20X24:[{type:0,value:'Enmarcado de 20" × 24"'}],PRODUCT_DESCRIPTION_CANVAS_PART_1_24X20:[{type:0,value:'Enmarcado de 24" × 20"'}],PRODUCT_DESCRIPTION_CANVAS_PART_1_20X30:[{type:0,value:'Enmarcado de 20" × 30"'}],PRODUCT_DESCRIPTION_CANVAS_PART_1_30X20:[{type:0,value:'Enmarcado de 30" × 20"'}],PRODUCT_DESCRIPTION_CANVAS_PART_2:[{type:0,value:'Bastidor de 1,25"<br>Marco resistente a impactos<br>Eganches para colgar incluidos'}],PRODUCT_DESCRIPTION_MOUNTED_PART_1_8X10:[{type:0,value:'Impresión montada de 8" × 10"'}],PRODUCT_DESCRIPTION_MOUNTED_PART_1_10X8:[{type:0,value:'Impresión montada de 10" × 8"'}],PRODUCT_DESCRIPTION_MOUNTED_PART_1_12X12:[{type:0,value:'Impresión montada de 12" × 12"'}],PRODUCT_DESCRIPTION_MOUNTED_PART_1_11X14:[{type:0,value:'Impresión montada de 11" × 14"'}],PRODUCT_DESCRIPTION_MOUNTED_PART_1_14X11:[{type:0,value:'Impresión montada de 14" × 11"'}],PRODUCT_DESCRIPTION_MOUNTED_PART_1_16X20:[{type:0,value:'Impresión montada de 16" × 20"'}],PRODUCT_DESCRIPTION_MOUNTED_PART_1_20X16:[{type:0,value:'Impresión montada de 20" × 16"'}],PRODUCT_DESCRIPTION_MOUNTED_PART_1_20X30:[{type:0,value:'Impresión montada de 20" × 30"'}],PRODUCT_DESCRIPTION_MOUNTED_PART_1_30X20:[{type:0,value:'Impresión montada de 30" × 20"'}],PRODUCT_DESCRIPTION_MOUNTED_PART_2_MATTE:[{type:0,value:'Acabado mate<br>Borde con textura de madera de 1"<br>Orificios ya hechos para facilitar la colocación'}],PRODUCT_DESCRIPTION_MOUNTED_PART_2_GLOSSY:[{type:0,value:'Acabado con brillo<br>Borde con textura de madera de 1"<br>Orificios ya hechos para facilitar la colocación'}],PRODUCT_DESCRIPTION_MOUNTED_PART_2_LUSTRE:[{type:0,value:'Acabado con brillo de primera calidad<br>Borde con textura de madera de 1"<br>Orificios ya hechos para facilitar la colocación'}],PRODUCT_DESCRIPTION_MOUNTED_PART_2_MATTE_KICKSTAND:[{type:0,value:'Acabado mate<br>Borde con textura de madera de 1"<br>Orificios ya hechos para facilitar la colocación y soporte para exhibición de sobremesa'}],PRODUCT_DESCRIPTION_MOUNTED_PART_2_GLOSSY_KICKSTAND:[{type:0,value:'Acabado con brillo<br>Borde con textura de madera de 1"<br>Orificios ya hechos para facilitar la colocación y soporte para exhibición de sobremesa'}],PRODUCT_DESCRIPTION_MOUNTED_PART_2_LUSTRE_KICKSTAND:[{type:0,value:'Acabado con brillo de primera calidad<br>Borde con textura de madera de 1"<br>Orificios ya hechos para facilitar la colocación y soporte para exhibición de sobremesa'}],PHOTO_TOO_SMALL_IN_SELECTED_SIZE:[{type:0,value:'Esta foto es demasiado pequeña para imprimirse en el tamaño que seleccionaste. Encontraremos el mejor tamaño más cercano automáticamente. <a href="http://help.yahoo.com/kb/index?page=content&y=PROD_FLICKR&locale=en_US&id=SLN22567">Más información</a>'}],BAD_SIZES:[{type:0,value:'Algunos tamaños no están disponibles debido a la resolución de la foto. <a target="_blank" href="http://help.yahoo.com/kb/index?page=content&y=PROD_FLICKR&locale=en_US&id=SLN22567">Más información</a>'}],NOT_AVAILABLE:[{type:0,value:"No disponible debido a la resolución de la foto"}],UPLOADR_ERROR_MESSAGE_GENERIC:[{type:0,value:"Ocurrió un problema al subir tu foto. Vuelve a intentarlo."}],UPLOADR_ERROR_MESSAGE_FILE_TYPE:[{type:0,value:"Al parecer, el tipo de archivo de esta foto no es válido. Sube una foto en formato PNG o JPG."}],UPLOADR_ERROR_MESSAGE_FILE_SIZE:[{type:0,value:"Al parecer, esta foto es demasiado grande para subirse. Podemos subir fotos con un tamaño máximo de 250 MB."}],UPLOADR_ERROR_MESSAGE_FILE_COUNT:[{type:0,value:"Selecciona solo una foto para subir."}],UPLOADR_ERROR_MESSAGE_LOW_QUALITY:[{type:0,value:'Al parecer, esta foto no cumple con los requisitos mínimos para su impresión. Selecciona una foto de al menos 975 &times; 825 píxeles. Más información sobre los <a href="http://help.yahoo.com/kb/index?page=content&y=PROD_FLICKR&locale=en_US&id=SLN22567" target="_blank">requisitos</a> para la impresión.'}],UPLOADR_ERROR_MESSAGE_COLOR_SPACE:[{type:0,value:'Lo sentimos, pero no podemos imprimir fotos con espacios de colores CMYK o ProPhoto RGB. Recomendamos fotos con un espacio de colores sRGB. <a href="https://help.yahoo.com/kb/flickr/creations-faq-sln22216.html?impressions=true#cont33" target="_blank">Más información</a>.'}],DRAG_DROP_TO_UPLOAD:[{type:0,value:'Arrastra y coloca tu foto para subirla o <a href="#" class="simulate-file-select">búscala</a>.'}],PHOTOS_UPLOADED_AS_PRIVATE:[{type:0,value:'Las fotos que se suban aquí se añadirán a tu <a href="/me/">Galería</a> de manera privada.'}],LOW_QUALITY_ZOOM_HANDLE_TOOLTIP_CANVAS:[{type:0,value:"Con este grado de acercamiento, tu foto se imprimirá a baja calidad. Aleja la imagen para comprar."}],LOW_QUALITY_ZOOM_HANDLE_TOOLTIP_MOUNTED:[{type:0,value:"Con este grado de acercamiento, tu foto se imprimirá a baja calidad. Aleja la imagen para comprar."}],INITIAL_DIALOG_CANVAS_DISABLED:[{type:0,value:"No podemos imprimir esta foto en un lienzo debido a su baja resolución. La foto debe tener una resolución de al menos 975 px × 825 px."}],INITIAL_DIALOG_MOUNTED_DISABLED:[{type:0,value:"No podemos hacer un póster con esta foto debido a su baja resolución. La foto debe tener una resolución de al menos 1000 px × 800 px. "}],GO_BACK:[{type:0,value:"Regresar"}],PHOTO_NOT_LARGE_ENOUGH_TO_ROTATE:[{type:0,value:"Esta foto no es lo suficientemente grande para girar a una orientación diferente."}],CHANGE_SIZE:[{type:0,value:"Cambiar tamaño"}],CHANGE_PHOTO:[{type:0,value:"Cambiar foto"}],CREATIONS:[{type:0,value:"Creaciones"}],VIEW_ORDER_HISTORY:[{type:0,value:"Ver historial de pedidos"}],COMPLETED:[{type:0,value:"Completado"}],IN_PROGRESS:[{type:0,value:"En curso"}],CREATE_NEW:[{type:0,value:"Crear nuevo"}],CREATIONS_EMPTY_WALLART:[{type:0,value:"No hay cuadros para mostrar."}],CREATIONS_EMPTY_BOOKS:[{type:0,value:"No hay libros de fotos para mostrar."}],CREATIONS_EMPTY_TERTIARY:[{type:0,value:'Mostraremos las creaciones en progreso y finalizadas aquí.<br>Más información sobre <a href="/create" title="">Cuadros</a> y <a href="/create" title="">Libros de fotos</a>.'}],CREATIONS_NOT_ABLE_DELETE:[{type:0,value:"No pudimos eliminar esta creación. Vuelve a intentarlo más tarde."}],PHOTO_FOR_WALLART_DELETED:[{type:0,value:"Se eliminó la foto para este cuadro."}],DELETE_THIS_WALLART:[{type:0,value:"Eliminar este cuadro"}],REORDER_THIS_WALLART:[{type:0,value:"Cambiar el orden de este cuadro"}],EDIT_THIS_WALLART:[{type:0,value:"Editar este cuadro"}],CHANGE_PAPER:[{type:0,value:"Cambiar papel"}],MATERIAL_DROPUP_LUSTRE_NEW:[{type:0,value:"El acabado lustre perlado le da una apariencia realista a tus fotos. Proporciona la saturación de colores del brillo y la resistencia a las huellas digitales del acabado mate."}],MATERIAL_DROPUP_GLOSSY_NEW:[{type:0,value:"Un acabado brillante impecable con un aspecto de alto contraste para que tus fotos se vean vívidas y claras. Excelente para las fotos con mucho reflejo como las de agua, metales y el cielo."}],MATERIAL_DROPUP_MATTE_NEW:[{type:0,value:"Un acabado mate elegante con menos contraste para realzar la textura de tus fotos. Resiste a las huellas digitales y es excelente para las fotos en blanco y negro."}],ON_SALE:[{type:0,value:"A la venta"}],PRODUCT_DESCRIPTION_CANVAS_PART_2_PREVIEW:[{type:0,value:'<span>Bastidor de 1,25"</span><span>Marco resistente a impactos</span><span>Aditamentos para colgar incluidos</span>'}],PRODUCT_DESCRIPTION_MOUNTED_PART_2_MATTE_PREVIEW:[{type:0,value:'<span>Acabado mate</span><span>Borde con textura de madera de 1"</span><span>Orificios ya hechos para facilitar la colocación</span>'}],PRODUCT_DESCRIPTION_MOUNTED_PART_2_GLOSSY_PREVIEW:[{type:0,value:'<span>Acabado con brillo</span><span>Borde con textura de madera de 1"</span><span>Orificios ya hechos para facilitar la colocación</span>'}],PRODUCT_DESCRIPTION_MOUNTED_PART_2_LUSTRE_PREVIEW:[{type:0,value:'<span>Acabado con brillo de primera calidad</span><span>Borde con textura de madera de 1"</span><span>Orificios ya hechos para facilitar la colocación</span>'}],PRODUCT_DESCRIPTION_MOUNTED_PART_2_MATTE_KICKSTAND_PREVIEW:[{type:0,value:'<span>Acabado mate</span><span>Borde con textura de madera de 1"</span><span>Orificios ya hechos para facilitar la colocación y soporte para exhibición de sobremesa</span>'}],PRODUCT_DESCRIPTION_MOUNTED_PART_2_GLOSSY_KICKSTAND_PREVIEW:[{type:0,value:'<span>Acabado con brillo</span><span>Borde con textura de madera de 1"</span><span>Orificios ya hechos para facilitar la colocación y soporte para exhibición de sobremesa</span>'}],PRODUCT_DESCRIPTION_MOUNTED_PART_2_LUSTRE_KICKSTAND_PREVIEW:[{type:0,value:'<span>Acabado con brillo de primera calidad</span><span>Borde con textura de madera de 1"</span><span>Orificios ya hechos para facilitar la colocación y soporte para exhibición de sobremesa</span>'}],PHOTO_BOOK:[{type:0,value:"Libro de fotos"}],GLOSSY_HARDCOVER_BOOK_PREMIUM_LUSTRE_PAPER:[{type:0,value:"Libro de tapa dura brillante de 11 × 8,5 pulg. con papel ilustración de alto gramaje"}],LOW_QUALITY_WARNING:[{type:0,value:"No se puede imprimir esta foto porque la resolución es demasiado baja."}],INVALID_COLORSPACE_WARNING:[{type:0,value:"No se puede imprimir esta foto porque utiliza un espacio de colores que no es compatible."}],LOW_QUALITY_TYPE_WARNING:[{type:0,value:"No se puede imprimir esta foto con este tipo de cuadro porque la resolución es demasiado baja."}],NO_COMPLETED_ORDER:[{type:0,value:"No se completó ningún pedido."}]})}),"@VERSION@",{requires:["intl"]});YUI.add("photo-selector-view",(function(t,e){var o,i=require("hermes-core/flog")(e),s=150;o={horizontal:20,vertical:20},t.FlickrView.create(this.name,t.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(t){return""===this.get("container").getHTML()&&this.setContainerWithTemplate("flickr-balls"),this.photoListView,this.searchPhotoListViews=[],this.publicOnlyGroups=t.publicOnlyGroups,this.publicOnlyPhotos=t.publicOnlyPhotos,this.safeOnlyPhotos=t.safeOnlyPhotos||!1,this.enableMultiSelect=t.enableMultiSelect||!1,this.multiSelectLimit=void 0===t.multiSelectLimit?1:t.multiSelectLimit,this.preSelectedPhotos=t.preSelectedPhotos||[],this.clearRegistriesOnDestroy=t.clearRegistriesOnDestroy||!1,this.navBarConfig=t.navBarConfig,this.initialButtonState=t.initialButtonState||{confirm:""},this.actionMessageConfig=t.actionMessageConfig||{message:"",messageIsError:!1},this.onConfirm=t.onConfirm||(t=>{}),this.selectedModels=[],t.enableVideos&&this.set("itemFilterFunction",!1),this.isUploading=!1,this.navBarConfig&&(this.subviewConfig["fluid-modal-nav-bar-view"]=Object.assign(this.subviewConfig["fluid-modal-nav-bar-view"],this.navBarConfig)),this.subviewConfig["basic-confirm-actions-view"]=Object.assign(this.subviewConfig["basic-confirm-actions-view"],{confirmButtonText:t.actionButtonLabel||this.intlMessage({intlName:"common.SELECT"}),showCancelButton:!1,initialButtonState:this.initialButtonState,message:this.actionMessageConfig.message,messageIsError:this.actionMessageConfig.messageIsError,showMessage:this.actionMessageConfig.showMessage,onConfirm:(t,e)=>{this.onConfirm(t,e)}}),this},subviewConfig:{"fluid-modal-nav-bar-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1},"basic-confirm-actions-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!1}},loadState:function(){var e=this.appContext.getViewer().nsid,o={};return this.safeOnlyPhotos&&(e+="-safe",o.safeSearch="true"),this.publicOnlyPhotos&&(e+="-public",o.viewAs="public"),this.appContext.getModelRegistry("profile-selected-photos-models").then(function(i){i.removeAll(),this.selectionRegistry=i,this.setsPromise=this.appContext.getModel("sets-models",this.appContext.getViewer().nsid,{page:1,perPage:25}).then((t=>(this.set("setsModel",t),t)));var s={selectionModel:this.appContext.getModel("profile-selected-photos-models",this.appContext.getViewer().nsid),photostreamModel:this.appContext.getModel("photostream-models",e,o),setModelRegistry:this.appContext.getModelRegistry("set-models"),profileModel:this.appContext.getModel("person-profile-models",this.appContext.getViewer().nsid)};return new t.FlickrPromise(s).then(this.onLoadStateResolved.bind(this))}.bind(this))},onLoadStateResolved:function(e){if(this.set("selectionModel",e.selectionModel),this.set("photostreamModel",e.photostreamModel),this.set("setModelRegistry",e.setModelRegistry),this.set("profileModel",e.profileModel),this.canUpload=this.get("hasUploadCapabilities")&&!t.UserLimitsHelper.hasReachedUploadLimit(this.get("profileModel"),this.appContext),this.preSelectedPhotos&&this.preSelectedPhotos.length>0&&this.get("selectionModel").setValue("photos",this.preSelectedPhotos?this.preSelectedPhotos:[]),0===this.get("photostreamModel").getValue("totalItems")?this.set("photostreamEmpty",!0):this.set("photostreamEmpty",!1),this.get("groupId"))return this.appContext.getModel("group-pool-models",this.get("groupId")).then(function(t){this.set("groupModel",t)}.bind(this),(function(t){i.error("error loading group model",{err:t})}))},moveElementToFirstInArray:function(t,e,o){var i;return t.forEach((function(t,s){t[o]===e&&(i=s)})),t.unshift(t.splice(i,1)[0]),t},buildContainer:function(){return this.setContainerWithTemplate("photo-selector",{hasUploadCapabilities:this.get("hasUploadCapabilities"),canUpload:this.canUpload,searchable:this.get("searchable"),publicOnlyPhotos:this.get("publicOnlyPhotos"),photostreamEmpty:this.get("photostreamEmpty"),hasGroupCapabilities:this.get("groupId")}),this},loadPhotoList:function(e,a){var r,n=this,l=this.get("container"),h=l.one(".photo-selector-photos-wrapper");this.photoListView&&this.photoListView.destroy(),a||(a=!1),r={modelParams:e,fetchParams:e.fetchParams,parentName:this.name,hasMultiSelect:this.enableMultiSelect,multiSelectLimit:this.multiSelectLimit,paginateOnScroll:!0,parentContainer:h,relayoutOnResize:!0,interactionViewName:this.get("interactionViewName"),galleryId:this.get("galleryId"),type:this.get("defaultSelected").type},this.get("itemFilterFunction")&&(r.itemFilterFunction=this.get("itemFilterFunction")),r.layout={targetRowHeight:s,containerWidth:r.parentContainer.get("offsetWidth"),containerPadding:{top:10,right:20,bottom:10,left:20},itemSpacing:o,forceAspectRatio:1,alwaysDisplayOrphans:!1,awakeBoundsToViewportSizeRatio:5,viewportContainerNodeHeight:h.get("offsetHeight")},this.appContext.params.primaryPhotoListConfig=r,this.appContext.getView(this.get("photoListViewName"),{appContext:this.appContext,publicOnlyPhotos:this.publicOnlyPhotos,primaryPhotoListConfig:r,isActiveViewAgnostic:!0,container:l.one(".photo-selector-photos-container")}).then((function(e){return e.initialize().then((function(e){var o,i=l.one(".photo-selector-photos-container"),s=i.one(".photo-list-view"),r=l.one(".loader");h.getDOMNode().scrollTop=0,n.photoListView=e,r&&r.addClass("loaded"),s.hasChildNodes()||(o=a?t.Node.create('<p class="no-results">'+n.intlMessage({intlName:"search.NO_MATCHES_FOR_QUERY_TERM_YOUR"})+"</p>"):n.publicOnlyPhotos?t.Node.create('<p class="no-results">'+n.intlMessage({intlName:"common.PHOTO_SELECTOR_EMPTY_PUBLIC_PHOTOS"})+"</p>"):t.Node.create('<p class="no-results">'+n.intlMessage({intlName:"common.PHOTO_SELECTOR_EMPTY_PHOTOS"})+"</p>"),s.empty(),i.prepend(o)),n.addPhotoToSelection(null)}))}),(function(t){i.error("Error getting view",{err:t})}))},loadSelectionPhotoList:function(){var e,a=this,r=this.get("container"),n=r.one(".photo-selector-photos-wrapper");this.photoListView&&this.photoListView.destroy(),(e={parentName:this.name,hasMultiSelect:this.enableMultiSelect,multiSelectLimit:this.multiSelectLimit,paginateOnScroll:!0,initialItems:this.get("selectionModel").getValue("photos").getList(),parentContainer:n,relayoutOnResize:!0,interactionViewName:"photo-selector-selection-interaction-view"}).layout={targetRowHeight:s,containerWidth:e.parentContainer.get("offsetWidth"),containerPadding:{top:10,right:20,bottom:10,left:20},itemSpacing:o,forceAspectRatio:1,alwaysDisplayOrphans:!0,awakeBoundsToViewportSizeRatio:5,viewportContainerNodeHeight:n.get("offsetHeight")},this.get("itemFilterFunction")&&(e.itemFilterFunction=this.get("itemFilterFunction")),this.appContext.params.primaryPhotoListConfig=e,this.appContext.getView(this.get("photoListViewName"),{appContext:this.appContext,publicOnlyPhotos:this.publicOnlyPhotos,primaryPhotoListConfig:e,isActiveViewAgnostic:!0,nsid:this.appContext.getViewer().nsid,container:r.one(".photo-selector-photos-container")}).then((function(e){return e.initialize().then((function(e){var o,i=r.one(".photo-selector-photos-container"),s=i.one(".photo-list-view"),l=r.one(".loader");i.addClass("photo-selector-selection-photolist"),n.getDOMNode().scrollTop=0,a.photoListView=e,l&&l.addClass("loaded"),s.hasChildNodes()||(o=t.Node.create('<p class="no-results">'+a.intlMessage({intlName:"profile.NO_PHOTOS_SELECTED"})+"</p>"),s.empty(),i.prepend(o))}))}),(function(t){i.error("Error getting view",{err:t})}))},loadGroupPhotoList:function(e){var a,r=this,n=this.get("container"),l=n.one(".group-photo-selector-photos-wrapper");this.photoListView&&this.photoListView.destroy(),a={modelParams:e,parentName:this.name,paginateOnScroll:!0,parentContainer:l,relayoutOnResize:!0,interactionViewName:this.get("interactionViewName")},this.get("itemFilterFunction")&&(a.itemFilterFunction=this.get("itemFilterFunction")),a.layout={targetRowHeight:s,containerWidth:a.parentContainer.get("offsetWidth"),containerPadding:{top:10,right:20,bottom:10,left:20},itemSpacing:o,forceAspectRatio:1,alwaysDisplayOrphans:!1,awakeBoundsToViewportSizeRatio:5,viewportContainerNodeHeight:l.get("offsetHeight")},this.appContext.params.primaryPhotoListConfig=a,this.appContext.getView(this.get("photoListViewName"),{appContext:this.appContext,publicOnlyPhotos:this.publicOnlyPhotos,primaryPhotoListConfig:a,isActiveViewAgnostic:!0,container:l}).then((function(e){return e.initialize().then((function(e){var o,i=n.one(".group-photo-selector-photos-container"),s=i.one(".photo-list-view");l.getDOMNode().scrollTop=0,r.photoListView=e,n.one(".loader").addClass("loaded"),s.hasChildNodes()||(o=t.Node.create('<p class="no-results">'+r.intlMessage({intlName:"groups.GROUP_POOL_CONTAINS_NO_PUBLIC_PHOTOS"})+"</p>"),s.empty(),i.prepend(o)),r.addPhotoToSelection(null)}))}),(function(t){i.error("Error getting view",{err:t})}))},loadSetsPhotoList:function(t){var e,s=this,a=this.get("container");this.photoListView&&this.photoListView.destroy(),(e={modelParams:t,parentName:this.name,paginateOnScroll:!0,parentContainer:a.one(".photo-selector-photos-wrapper"),relayoutOnResize:!0,interactionViewName:this.get("setsInteractionViewName"),engagementModelName:"set-models",viewBeaconRestrictedAttribute:"primaryNeedsInterstitial"}).layout={targetRowHeight:200,containerWidth:e.parentContainer.get("offsetWidth"),containerPadding:{top:10,right:20,bottom:10,left:20},itemSpacing:o,forceAspectRatio:1,alwaysDisplayOrphans:!1,awakeBoundsToViewportSizeRatio:5,viewportContainerNodeHeight:a.one(".photo-selector-photos-wrapper").get("offsetHeight")},this.appContext.params.primaryPhotoListConfig=e,this.appContext.getView(this.get("photoListViewName"),{appContext:this.appContext,publicOnlyPhotos:this.publicOnlyPhotos,primaryPhotoListConfig:e,isActiveViewAgnostic:!0,container:a.one(".photo-selector-photos-container")}).then((function(t){return t.initialize().then((function(t){var e=a.one(".loader");a.one(".photo-selector-photos-container .photo-list-view");a.one(".photo-selector-photos-wrapper").getDOMNode().scrollTop=0,s.photoListView=t,e&&a.one(".loader").addClass("loaded"),s.addPhotoToSelection(null)}))}),(function(t){i.error("Error getting view",{err:t})}))},loadSearchPhotoList:function(t){var e,a=this,r=this.get("container"),n=t.photoListContainerSelector?r.one(t.photoListContainerSelector):r.one(".photo-selector-photos-container"),l=t.parentContainerSelector?r.one(t.parentContainerSelector):r.one(".photo-selector-photos-wrapper"),h=t.maxNumRows?this.get("limitedRowsPhotoListViewName"):this.get("photoListViewName");this.searchPhotoListViews&&this.searchPhotoListViews[t.listId]&&this.searchPhotoListViews[t.listId].destroy(),e={modelParams:t.modelParams,parentName:this.name,paginateOnScroll:!0,parentContainer:l,relayoutOnResize:!0,interactionViewName:this.get("interactionViewName"),engagementModelName:"photo-lite-models"},this.get("itemFilterFunction")&&(e.itemFilterFunction=this.get("itemFilterFunction")),e.layout={targetRowHeight:s,containerWidth:e.parentContainer.get("offsetWidth"),containerPadding:{top:10,right:0,bottom:10,left:0},itemSpacing:o,forceAspectRatio:1,maxNumRows:t.maxNumRows?t.maxNumRows:Number.POSITIVE_INFINITY,alwaysDisplayOrphans:!!t.alwaysDisplayOrphans&&t.alwaysDisplayOrphans,awakeBoundsToViewportSizeRatio:5,viewportContainerNodeHeight:l.get("offsetHeight")},this.appContext.params.primaryPhotoListConfig=e,this.appContext.getView(h,{appContext:this.appContext,publicOnlyPhotos:this.publicOnlyPhotos,primaryPhotoListConfig:e,isActiveViewAgnostic:!0,container:n,searchUrl:t.searchUrl,listId:t.listId}).then((function(e){return e.initialize().then((function(e){a.registerEventHandler(e.on("subviewViewEvent",a.handleSubviewEvent,a)),r.one(".photo-selector-search-lists-wrapper").getDOMNode().scrollTop=0,t.parentContainerSelector&&(r.one(t.parentContainerSelector).getDOMNode().scrollTop=0),a.searchPhotoListViews[t.listId]=e,r.one(".loader").addClass("loaded"),a.addPhotoToSelection(null)}))}),(function(t){i.error("Error getting view",{err:t})}))},activate:function(){var e,o=this.get("container"),i=this.get("defaultSelected");return this.subviews["fluid-modal-nav-bar-view"]&&(this.navBarView=this.subviews["fluid-modal-nav-bar-view"],this.navBarView.on("search",(t=>{this.handleSearch(t)})),this.navBarView.on("navigation",(t=>{this.handleNavigation(t)}))),this.confirmView=this.subviews["basic-confirm-actions-view"],this.registerEventHandler(o.on("click",this.handleClick,this)),this.canUpload&&this.registerEventHandler(o.one(".file-select").on("change",this.handleFileSelect,this)),this.registerEventHandler(t.on("photoSelector:subviewEvent",this.handleSubviewEvent,this)),i?"group"===i.type?(e={registryName:"group-pool-models",modelIdOrAttributes:this.get("groupId")+"-public",collectionAttributeName:"photoPageList"},this.publicOnlyGroups&&(e.fetchParams={privacyFilter:1},e.modelIdOrAttributes+="-public"),this.toggleGroupSelector(),this.loadGroupPhotoList(e),this.toggleTitleBar(i.title,"group")):"gallery"===i.type?(e={registryName:"gallery-info-models",modelIdOrAttributes:i.id,collectionAttributeName:"photoList"},this.loadPhotoList(e)):"galleryFaves"===i.type?(e={registryName:"gallery-faves-models",modelIdOrAttributes:this.get("defaultSelected").id,collectionAttributeName:"photoList",fetchParams:{galleryId:this.get("galleryId")}},this.loadPhotoList(e)):(e={registryName:"set-models",modelIdOrAttributes:i.id,collectionAttributeName:"photoPageList",fetchParams:{}},this.publicOnlyPhotos&&(e.modelIdOrAttributes+="-public",e.fetchParams.filter=1),this.safeOnlyPhotos&&(e.modelIdOrAttributes+="-safe",e.fetchParams.moderationFilter=1),this.loadPhotoList(e),this.toggleTitleBar(i.title,"set")):0===this.get("photostreamModel").getValue("totalItems")?this.get("hasUploadCapabilities")?(this.toggleUploader(),this.hideTitleBar()):this.toggleTitleBar(this.intlMessage({intlName:this.publicOnlyPhotos?"common.PHOTO_SELECTOR_EMPTY_PUBLIC_PHOTOS":"common.PHOTO_SELECTOR_EMPTY_PHOTOS"},"empty",!1)):(e={registryName:"photostream-models",modelIdOrAttributes:this.appContext.getViewer().nsid,collectionAttributeName:"photoPageList",fetchParams:{}},this.safeOnlyPhotos&&(e.modelIdOrAttributes+="-safe",e.fetchParams.safeSearch="true"),this.publicOnlyPhotos&&(e.modelIdOrAttributes+="-public",e.fetchParams.viewAs="public"),this.loadPhotoList(e,!1)),this},toggleUploader:function(){this.get("hasUploadCapabilities")&&(this.get("container").one(".photo-selector-photos-wrapper").addClass("is-hiding"),this.photoListView&&this.get("container").one(".photo-selector-photos-container").empty().append(this.templates("flickr-balls")({})),this.get("container").one(".photo-selector-search-lists-wrapper").addClass("is-hiding"),this.get("container").one(".photo-selector-upload").removeClass("is-hiding"),this.get("groupId")&&this.get("container").one(".group-photo-selector-photos-wrapper").addClass("is-hiding"))},toggleSelector:function(){this.get("hasUploadCapabilities")&&this.get("container").one(".photo-selector-upload").addClass("is-hiding"),this.get("container").one(".photo-selector-search-lists-wrapper").addClass("is-hiding"),this.get("groupId")&&this.get("container").one(".group-photo-selector-photos-wrapper").addClass("is-hiding"),this.get("container").one(".photo-selector-photos-wrapper").removeClass("is-hiding")},toggleSearchListsSelector:function(){this.get("hasUploadCapabilities")&&this.get("container").one(".photo-selector-upload").addClass("is-hiding"),this.get("container").one(".photo-selector-photos-wrapper").addClass("is-hiding"),this.photoListView&&this.get("container").one(".photo-selector-photos-container").empty().append(this.templates("flickr-balls")({})),this.get("container").one(".photo-selector-search-lists-wrapper").removeClass("is-hiding"),this.get("groupId")&&this.get("container").one(".group-photo-selector-photos-wrapper").addClass("is-hiding")},toggleGroupSelector:function(){var t=this.get("container").one(".photo-selector-upload");t&&t.addClass("is-hiding"),this.get("container").one(".photo-selector-photos-wrapper").addClass("is-hiding"),this.photoListView&&this.get("groupId")&&this.get("container").one(".group-photo-selector-photos-wrapper").empty().append(this.templates("flickr-balls")({})),this.get("container").one(".photo-selector-search-lists-wrapper").addClass("is-hiding"),this.get("groupId")&&this.get("container").one(".group-photo-selector-photos-wrapper").removeClass("is-hiding")},toggleTitleBar:function(t,e,o){var i=this.get("container"),s=i.one(".photo-selector-title-bar"),a=s.one(".back-to-list"),r="";void 0===o&&(o=!0),"search"===e&&t&&(t='"'+t+'"'),"set"===e?r=this.intlMessage({intlName:"common.PHOTO_SELECTOR_BACK_TO_ALBUM_LIST"}):"search"===e&&(r=this.intlMessage({intlName:"common.PHOTO_SELECTOR_BACK_TO_SEARCH_LIST"})),o?a.removeClass("hidden"):a.addClass("hidden"),a.one(".back-to-list-text").set("text",r),s.one(".title").set("text",t),s.removeClass("hidden"),i.one(".photo-selector-photos-wrapper").addClass("showing-title"),i.one(".photo-selector-search-lists-wrapper").addClass("showing-title"),this.get("groupId")&&i.one(".group-photo-selector-photos-wrapper").addClass("showing-title")},hideTitleBar:function(){var t=this.get("container");t.one(".photo-selector-title-bar").addClass("hidden"),t.one(".photo-selector-photos-wrapper").removeClass("showing-title"),this.get("groupId")&&t.one(".group-photo-selector-photos-wrapper").removeClass("showing-title")},handleNavigation:async function(e){var o,i=e.details[0].target.getData("value"),s=this.get("container").one(".no-results");if("upload"===i)this.get("hasUploadCapabilities")&&(this.toggleUploader(),this.hideTitleBar()),this.get("fileDragDrop")?this.get("fileDragDrop").reset():this.canUpload&&(this.set("fileDragDrop",new t.HtmlFileDragDrop({dropZone:".photo-selector-upload > .drop-zone"})),this.get("fileDragDrop").on("drop",this.handleFileDrop,this));else{if(this.get("hasUploadCapabilities")&&this.toggleSelector(),"group"===i)o={registryName:"group-pool-models",modelIdOrAttributes:this.get("groupId"),collectionAttributeName:"photoPageList"},this.publicOnlyGroups&&(o.fetchParams={privacyFilter:1},o.modelIdOrAttributes+="-public"),this.toggleGroupSelector(),this.loadGroupPhotoList(o);else if("photostream"===i){if(0===this.get("photostreamModel").getValue("totalItems"))return s&&s.remove(),void(this.get("hasUploadCapabilities")?(this.toggleUploader(),this.hideTitleBar()):this.toggleTitleBar(this.intlMessage({intlName:this.publicOnlyPhotos?"common.PHOTO_SELECTOR_EMPTY_PUBLIC_PHOTOS":"common.PHOTO_SELECTOR_EMPTY_PHOTOS"},"empty",!1)));o={registryName:"photostream-models",modelIdOrAttributes:this.appContext.getViewer().nsid,collectionAttributeName:"photoPageList",fetchParams:{}},this.safeOnlyPhotos&&(o.modelIdOrAttributes+="-safe",o.fetchParams.safeSearch="true"),this.publicOnlyPhotos&&(o.modelIdOrAttributes+="-public",o.fetchParams.viewAs="public"),this.loadPhotoList(o)}else if("sets"===i){if(await this.setsPromise,0===this.get("setsModel").getValue("totalItems")){var a=this.get("container").one(".photo-list-view");return s&&s.remove(),this.toggleTitleBar(this.intlMessage({intlName:"common.PHOTO_SELECTOR_NO_ALBUMS"},"empty",!1)),void a.empty()}o={registryName:"sets-models",modelIdOrAttributes:this.appContext.getViewer().nsid,collectionAttributeName:"albumsList"},this.loadSetsPhotoList(o)}else"gallery"===i?(o={registryName:"gallery-info-models",modelIdOrAttributes:this.get("galleryId"),collectionAttributeName:"photoList"},this.loadPhotoList(o)):"galleryFaves"===i?(o={registryName:"gallery-faves-models",modelIdOrAttributes:this.get("defaultSelected").id,collectionAttributeName:"photoList",fetchParams:{galleryId:this.get("galleryId")}},this.loadPhotoList(o)):this.loadSelectionPhotoList();this.hideTitleBar()}},handleSearch:function(e){var o,i,s=e.details[0],a={},r=this.get("searchable");if(i=new t.SearchUrl(s.apiParams,this.appContext),this.toggleSearchListsSelector(),r.yours){if(this.searchUrlYourPhotos=new t.SearchUrl(s.apiParams,this.appContext),s.contextSearch)if("group"===s.contextSearch)this.searchUrlYourPhotos.setAPIParam("group_id",this.get("groupId"));else this.searchUrlYourPhotos.setAPIParam("user_id",this.appContext.getViewer().nsid);else this.searchUrlYourPhotos.setAPIParam("user_id",this.appContext.getViewer().nsid);r.contacts||r.everyone?(a.listId="yours",a.photoListContainerSelector=".photo-selector-search-list-yours .photo-selector-search-list-container",a.parentContainerSelector=".photo-selector-search-list-yours",a.maxNumRows=1,a.alwaysDisplayOrphans=!0,a.searchUrl=this.searchUrlYourPhotos,a.modelParams={registryName:"search-photos-lite-models",modelIdOrAttributes:this.searchUrlYourPhotos.getId(),collectionAttributeName:"photos",fetchParams:{apiParams:this.searchUrlYourPhotos.getAPIParams()}},this.publicOnlyPhotos&&(o.fetchParams.privacyFilter=1),this.loadSearchPhotoList(a)):(this.toggleSelector(),o={registryName:"search-photos-lite-models",modelIdOrAttributes:this.searchUrlYourPhotos.getId(),collectionAttributeName:"photos",fetchParams:{apiParams:this.searchUrlYourPhotos.getAPIParams(),additionalExtras:["o_dims"]}},this.publicOnlyPhotos&&(o.fetchParams.privacyFilter=1),this.loadPhotoList(o,!0))}r.contacts&&(this.searchUrlContactsPhotos=new t.SearchUrl(s.apiParams,this.appContext),this.searchUrlContactsPhotos.setAPIParam("user_id",this.appContext.getViewer().nsid),this.searchUrlContactsPhotos.setAPIParam("contacts","all"),a.listId="contacts",a.photoListContainerSelector=".photo-selector-search-list-contacts .photo-selector-search-list-container",a.parentContainerSelector=".photo-selector-search-list-contacts",a.maxNumRows=1,a.alwaysDisplayOrphans=!0,a.searchUrl=this.searchUrlContactsPhotos,a.modelParams={registryName:"search-photos-lite-models",modelIdOrAttributes:this.searchUrlContactsPhotos.getId(),collectionAttributeName:"photos",fetchParams:{apiParams:this.searchUrlContactsPhotos.getAPIParams()}},this.loadSearchPhotoList(a)),r.everyone&&(this.searchUrlEveryonePhotos=new t.SearchUrl(s.apiParams,this.appContext),a.listId="everyone",a.photoListContainerSelector=".photo-selector-search-list-everyone .photo-selector-search-list-container",a.parentContainerSelector=".photo-selector-search-list-everyone",a.maxNumRows=1,a.alwaysDisplayOrphans=!0,a.searchUrl=this.searchUrlEveryonePhotos,a.modelParams={registryName:"search-photos-lite-models",modelIdOrAttributes:s.id,collectionAttributeName:"photos",fetchParams:{apiParams:this.searchUrlEveryonePhotos.getAPIParams()}},this.loadSearchPhotoList(a)),this.toggleTitleBar(i.getAPIParams().text,"search",!1)},handleSubviewEvent:function(e){var o,i,s;return"selectPhotoFromPhotoList"===e.eventName?(o={photoModel:this.appContext.getModel("photo-models",e.id)},new t.FlickrPromise(o).then(function(t){t.photoModel.isOwner&&this.set("photoSource",this.get("photoSourceOwnImage")),this.enableMultiSelect&&this.hasReachMultiSelectLimit()||this.addPhotoToSelection(t.photoModel.id,t.photoModel)}.bind(this))):"unselectPhotoFromPhotoList"===e.eventName?(o={photoModel:this.appContext.getModel("photo-models",e.id)},new t.FlickrPromise(o).then(function(t){t.photoModel.isOwner&&this.set("photoSource",this.get("photoSourceOwnImage")),this.removePhotoFromSelection(t.photoModel.id,t.photoModel)}.bind(this))):"selection:remove"===e.eventName?(o={photoModel:this.appContext.getModel("photo-models",e.model.getValue("id"))},new t.FlickrPromise(o).then(function(t){t.photoModel.isOwner&&this.set("photoSource",this.get("photoSourceOwnImage")),this.removePhotoFromSelection(t.photoModel.id,t.photoModel,!0)}.bind(this))):void("selectSetFromPhotoList"===e.eventName?(i={registryName:"set-models",modelIdOrAttributes:e.id,collectionAttributeName:"photoPageList",fetchParams:{}},this.publicOnlyPhotos&&(i.modelIdOrAttributes+="-public",i.fetchParams.filter=1),this.safeOnlyPhotos&&(i.modelIdOrAttributes+="-safe",i.fetchParams.moderationFilter=1),this.loadPhotoList(i,!1),this.toggleTitleBar(e.title,"set")):e.details&&"viewEntireSearchList"===e.details[0]&&(i={registryName:"search-photos-lite-models",modelIdOrAttributes:e.details[1].searchUrl.getId(),collectionAttributeName:"photos",fetchParams:{apiParams:e.details[1].searchUrl.getAPIParams()}},this.publicOnlyPhotos&&(i.fetchParams.privacyFilter=1),this.toggleSelector(),this.loadPhotoList(i),s="search.YOUR_PHOTOS","contacts"===e.details[1].list?s="search.FROM_YOUR_CONTACTS":"everyone"===e.details[1].list&&(s="search.EVERYONES_PHOTOS"),s=this.intlMessage({intlName:s}),this.toggleTitleBar(s+": "+e.details[1].searchUrl.getAPIParams().text,"search")))},handleClick:function(t){var e=t.target;this.isUploading||(e.ancestor(".back-to-list",!0)?this.navBarView.get("currentSelection")?this.navBarView.reselectTab():this.navBarView.get("searchData")&&this.navBarView.redoSearch():e.ancestor(".simulate-file-select",!0)&&(t.halt(),this.get("container").one(".file-select").set("value",""),this.get("container").one(".file-select").getDOMNode().click()))},handleSelectPhoto:function(e){var o;if(o={photoModel:this.appContext.getModel("photo-models",e.getData("photo-id"))},!e.hasClass("invalid"))return this.set("photoSource",this.get("photoSourceOwnImage")),new t.FlickrPromise(o).then(function(t){this.addPhotoToSelection(t.photoModel.id,t.photoModel)}.bind(this))},hasReachMultiSelectLimit:function(){return this.get("selectionModel").getValue("photos").size()===this.multiSelectLimit},addPhotoToSelection:function(e,o){if(null===e)this.set("selected",null),t.fire("photoSelector:unselected");else if(e&&this.enableMultiSelect){var i=this.get("selectionModel").getValue("photos");this.hasReachMultiSelectLimit()||i.find(o)||(i.push(o),t.fire("photoSelector:selected",{hasWarning:!1,photoId:e}),this.updateSelectCountText(i.size()))}else e&&(this.set("selected",e),t.fire("photoSelector:selected",{hasWarning:!1,photoId:e}))},updateSelectCountText:function(e){var o=this.multiSelectLimit-e;t.fire("photoSelector:updateCount",{remainingCount:o})},removePhotoFromSelection:function(e,o,i){var s=this.get("selectionModel").getValue("photos");s.find(o)&&(s.removeFromList(e)&&(t.fire("photoSelector:unselected",{hasWarning:!1,photoId:e,wasLastPhotoSelected:0===s.size()}),this.updateSelectCountText(s.size()),i&&this.loadSelectionPhotoList()))},clearSelections:function(){t.fire("photoSelector:deselectAll");const e=this.navBarView.get("currentSelection");"selection"===e.getData("value")&&e.hasClass("selected")&&setTimeout((()=>{this.loadSelectionPhotoList()}),100)},handlePhotoSetSelector:function(t){var e;this.get("hasUploadCapabilities")&&this.toggleSelector(),e={registryName:"set-models",modelIdOrAttributes:this.publicOnlyPhotos?t+"-public":t,collectionAttributeName:"photoPageList"},this.publicOnlyPhotos&&(e.fetchParams={filter:1}),this.loadPhotoList(e)},handlePhotoUploaded:function(t){this.appContext.getModelRegistry("photostream-models").then(function(e){e.attributeSearch({normalizedId:this.appContext.getViewer().nsid},!0).forEach((function(t){e.remove(t)})),this.addPhotoToSelection(t.id,t),this.onConfirm(),this.resetUploader()}.bind(this),function(t){this.appContext.err(t)}.bind(this))},handleFileSelect:function(t){var e;(e=t.target.getDOMNode().files[0])&&e.name&&this.uploadFile(e)},pollTicket:function(e){if(this.uploadTimer){if(t.moment().diff(this.uploadTimer,"seconds")>this.get("maxUploadTimeAllowed"))return this.showUploadError("GENERIC")}else this.uploadTimer=t.moment();this.appContext.callAPI("flickr.photos.upload.checkTickets",{tickets:e}).then(function(t){var o;t&&t.stat&&("ok"!==t.stat&&this.showUploadError("GENERIC"),t.uploader&&t.uploader.ticket instanceof Array&&(o=t.uploader.ticket[0])&&o.id===e&&(1===o.complete?this.appContext.getModel("photo-models",o.photoid).then(this.handlePhotoUploaded.bind(this),(function(t){this.showUploadError("GENERIC")})):2===o.complete?this.showUploadError("FILE_TYPE"):setTimeout(function(){this.pollTicket(e)}.bind(this),1e3)))}.bind(this),function(t){this.showUploadError("GENERIC")}.bind(this))},resetUploader:function(){this.clearUploadError(),this.get("container").one(".drop-zone").removeClass("uploading"),this.get("container").removeClass("uploading"),this.isUploading=!1,this.uploadTimer=void 0},uploadFile:function(e){var o,s,a,r=new FormData,n=t.config.flickr.api.hostname_client_upload;this.clearUploadError(),this.get("container").one(".drop-zone").addClass("uploading"),this.get("container").addClass("uploading"),this.isUploading=!0,r.append("api_key",t.SiteKey.getKey()),r.append("csrf",t.config.flickr.csrf.token),r.append("photo",e,e.name),r.append("async","1"),r.append("is_public","0"),r.append("is_friend","0"),r.append("is_family","0"),r.append("content_type","1"),(o=this._imgFileXhr=new XMLHttpRequest).open("POST",n,!0),o.withCredentials=!0,s=function(t){var e="object"==typeof t?t.target.statusText:t+"";i.error("Error during upload",{statusText:e}),this.resetUploader(),this.showUploadError("GENERIC")},a=function(e){var o,i,a,r;try{i=(r=t.one(e.currentTarget.responseXML)).one("rsp").getAttribute("stat")}catch(t){i="",o=""}return"ok"!==i?s((i||"empty")+": "+(o||"no message")):(a=r.one("ticketid").get("text"),this.pollTicket(a))},o.addEventListener("load",a.bind(this)),o.addEventListener("error",s.bind(this)),o.send(r)},clearUploadError:function(){this.get("container").one(".upload-error").setHTML("")},showUploadError:function(t){this.resetUploader(),this.get("container").one(".upload-error").setHTML(this.intlMessage({intlName:this.get("errorMessages")[t]})),this.get("fileDragDrop").showError()},handleFileDrop:function(t){this.isUploading||(t instanceof Error?this.showUploadError(t.message):this.uploadFile(t))},destructor:function(){this.photoListView&&this.photoListView.destroy()}},{ATTRS:{maxUploadTimeAllowed:{readOnly:!0,value:20},errorMessages:{readOnly:!0,value:{GENERIC:"common.PHOTO_SELECTOR_ERROR_MESSAGE_GENERIC",FILE_TYPE:"common.PHOTO_SELECTOR_ERROR_MESSAGE_FILE_TYPE",FILE_SIZE:"common.PHOTO_SELECTOR_ERROR_MESSAGE_FILE_SIZE",FILE_COUNT:"common.PHOTO_SELECTOR_ERROR_MESSAGE_FILE_COUNT",
LOW_QUALITY:"common.PHOTO_SELECTOR_ERROR_MESSAGE_LOW_QUALITY",COLOR_SPACE:"common.PHOTO_SELECTOR_ERROR_MESSAGE_COLOR_SPACE"}},photoSourceOwnImage:{readOnly:!0,value:1},hasUploadCapabilities:{value:!0},photoListViewName:{value:"photo-selector-photolist-view"},limitedRowsPhotoListViewName:{value:"photo-selector-limited-rows-photolist-view"},searchable:{value:{yours:!0,contacts:!0,everyone:!0}},interactionViewName:{value:"photo-selector-photolist-interaction-view"},setsInteractionViewName:{value:"photo-selector-sets-photolist-interaction-view"},itemFilterFunction:{value:function(t){return!t.getValue("isVideo")}},defaultSelected:{value:!1},selected:{},groupId:{},galleryId:{}}})}),"@VERSION@",{requires:["flickr-view","flickr-promise","flickr-api","html-file-dragdrop","hermes-template-photo-selector","photo-selector-photolist-view","photo-selector-limited-rows-photolist-view","photo-selector-photolist-interaction-view","photo-selector-sets-photolist-interaction-view","fluid-modal-nav-bar-view","basic-confirm-actions-view","user-limits-helper","site-key","moment"],optionalRequires:["hermes-core"],optional:["search-photos-lite-models"],langBundles:["common","wallart","search","groups","profile","upload-blocking"]});YUI.add("hermes-lang-upload-blocking_es-us",(function(e,a){e.Intl.add("hermes/upload-blocking","es-US",{UPLOADS_LOCKED_SOON:[{type:0,value:"Tus archivos cargados se bloquearán pronto."}],FREE_ACCOUNTS_NO_LONGER_UPLOAD:[{type:0,value:"A partir del 8 de enero las cuentas gratuitas de Flickr con "},{type:1,value:"limitCount"},{type:0,value:" fotos o más no podrán cargar fotos nuevas."}],LEARN_MORE_ABOUT_CHANGES_HERE:[{type:0,value:"Más información sobre estos cambios aquí."}],UPGRADE_TO_GET_UNLIMITED:[{type:0,value:"Para cargas ilimitadas, actualiza a Pro con "},{type:1,value:"percentOff"},{type:0,value:"% de descuento utilizando el código "},{type:1,value:"couponCode"},{type:0,value:"."}],FREE_ACCOUNTS_NO_LONGER_UPLOAD_2:[{type:0,value:"A partir del 8 de enero de 2019 las cuentas gratuitas de Flickr con "},{type:1,value:"limitCount"},{type:0,value:" fotos o más no podrán cargar fotos nuevas. A partir del 5 de febrero de 2019 algunos elementos que superen el límite estarán en riesgo de ser eliminados."}],FREE_ACCOUNTS_NO_LONGER_UPLOAD_BY_1_8_2019:[{type:0,value:"A partir del 8 de enero, las cuentas gratuitas de Flickr con "},{type:1,value:"limitCount"},{type:0,value:" fotos y videos o más no podrán cargar contenido nuevo."}],UPGRADE_TO_GET_UNLIMITED_BY_1_8_2019:[{type:0,value:"Para cargas ilimitadas, actualiza a Pro con "},{type:1,value:"percentOff"},{type:0,value:" % de descuento utilizando el código "},{type:1,value:"couponCode"},{type:0,value:". (Descuento válido hasta el 8 de enero de 2019)."}],OVER_UPLOAD_LIMIT_HEAD:[{type:0,value:"Tus fotos corren riesgo de ser borradas pronto."}],OVER_UPLOAD_LIMIT_COPY:[{type:0,value:'Tu cuenta gratis de Flickr <a href="'},{type:1,value:"limitedImagesUrl"},{type:0,value:'" target="_blank">está limitada a '},{type:1,value:"limitCount"},{type:0,value:'</a> fotos o videos. Ahora, las cargas están bloqueadas. A partir del 5 de febrero, los elementos más antiguos que superen el límite de las cuentas gratuitas podrán ser borrados. Para desbloquear las descargas y proteger tus fotos y videos, deberás quitar elementos hasta que estés por debajo del límite de la cuenta o <a href="'},{type:1,value:"upgradeToProUrl"},{type:0,value:'">actualizar a Flickr Pro</a> para tener almacenamiento ilimitado.'}],AT_UPLOAD_LIMIT_HEAD:[{type:0,value:"Las cargas ahora están bloqueadas."}],AT_UPLOAD_LIMIT_COPY:[{type:0,value:'Tu cuenta gratis de Flickr <a href="'},{type:1,value:"limitedImagesUrl"},{type:0,value:'" target="_blank">está limitada a '},{type:1,value:"limitCount"},{type:0,value:'</a> fotos o videos. A partir del 5 de febrero, los elementos más antiguos que superen el límite de las cuentas gratuitas podrán ser borrados. Sin embargo, cualquier elemento con la licencia Creative Commons (o con otros tipos de licencias gratuitas) antes del 1 de noviembre de 2018 no se borrará. Para cargar fotos o videos nuevos, deberás quitar elementos hasta que estés por debajo del límite de la cuenta o puedes <a href="'},{type:1,value:"upgradeToProUrl"},{type:0,value:'">actualizar a Flickr Pro</a> para tener cargas ilimitadas.'}],UPLOADS_LOCKED_SOON_HEAD:[{type:0,value:"Tus archivos cargados serán bloqueados pronto."}],UPLOADS_LOCKED_SOON_COPY:[{type:0,value:'Estás por alcanzar el <a href="'},{type:1,value:"limitedImagesUrl"},{type:0,value:'" target="_blank">'},{type:1,value:"limitCount"},{type:0,value:" límite de elementos para tu cuenta gratuita de Flickr</a>. Para cargar más de "},{type:1,value:"limitCount"},{type:0,value:' fotos o videos, deberás <a href="'},{type:1,value:"upgradeToProUrl"},{type:0,value:'">actualizar a Flickr Pro</a> para tener cargar ilimitadas.'}],YOU_CAN_UPLOAD_COUNT_MORE:[{type:6,value:"photoCount",options:{one:{value:[{type:0,value:"Puedes cargar "},{type:1,value:"countString"},{type:0,value:" más fotos o videos."}]},other:{value:[{type:0,value:"Puedes cargar "},{type:1,value:"countString"},{type:0,value:" más fotos y videos."}]}},offset:0,pluralType:"cardinal"}],MORE_THAN_LIMIT_ITEMS_TO_UPLOAD:[{type:6,value:"photoCount",options:{one:{value:[{type:0,value:"Parece que hay más de "},{type:1,value:"countString"},{type:0,value:" elementos para cargar. Cargaremos los primeros "},{type:1,value:"countString"},{type:0,value:" de esta tanda."}]},other:{value:[{type:0,value:"Parece que hay más de "},{type:1,value:"countString"},{type:0,value:" elementos para cargar. Cargaremos los primeros "},{type:1,value:"countString"},{type:0,value:" de esta tanda."}]}},offset:0,pluralType:"cardinal"}],NEVERMIND:[{type:0,value:"Olvídalo"}],OK_GO_AHEAD:[{type:0,value:"OK, adelante"}],UPLOAD_QUEUE_FULL:[{type:0,value:"¡Tu fila de cargas está llena!"}],GET_PRO_FOR_UNLIMITED:[{type:0,value:"Obtén Flickr Pro para obtener cargas ilimitadas"}],NOT_NOW:[{type:0,value:"Ahora no"}],UPLOAD_YOUVE_REACHED_LIMIT_GET_PRO:[{type:0,value:"Has llegado al límite de 1000 cargas. Obtén Flickr Pro para obtener cargas ilimitadas."}],YOUVE_REACHED_UPLOAD_LIMIT:[{type:0,value:"Has llegado al límite de "},{type:1,value:"limitCount"},{type:0,value:" cargas de elementos."}],AT_UPLOAD_LIMIT_COPY_SHORT:[{type:0,value:'Tu cuenta gratis de Flickr está <a href="'},{type:1,value:"limitedImagesUrl"},{type:0,value:'" target="_blank"> limitada a '},{type:1,value:"limitCount"},{type:0,value:" fotos o videos</a> . Para cargar más de "},{type:1,value:"limitCount"},{type:0,value:" elementos, deberás actualizar a Flickr Pro para tener almacenamiento ilimitado."}],OVER_UPLOAD_LIMIT_COPY_SHORT:[{type:0,value:'Tu cuenta gratis de Flickr está <a href="'},{type:1,value:"limitedImagesUrl"},{type:0,value:'" target="_blank"> limitada a '},{type:1,value:"limitCount"},{type:0,value:" fotos o videos</a> . A partir del 5 de febrero, los elementos más antiguos que superen el límite de las cuentas gratuitas podrán ser borrados. Actualizar a Flickr Pro para obtener almacenamiento ilimitado."}],PHOTO_EDITOR_REACHED_UPLOAD_LIMIT:[{type:0,value:"Has llegado a tu límite de "},{type:1,value:"limitCount"},{type:0,value:' elementos. Para guardar una copia nueva, <a href="'},{type:1,value:"upgradeToProUrl"},{type:0,value:'" target="_blank">actualiza a Flickr Pro</a>.'}],OVER_UPLOAD_LIMIT_EXTEND_HEAD:[{type:0,value:"Actualización: Extensión de fecha límite para cuentas gratuitas de Flickr."}],OVER_UPLOAD_LIMIT_EXTEND_COPY:[{type:0,value:"Vamos a extender la fecha límite para que actualices a Flickr Pro para obtener almacenamiento ilimitado o estar sujeto a la eliminación de tus fotos/videos para cumplir con el nuevo límite de "},{type:1,value:"limit"},{type:0,value:" elementos. La nueva fecha límite es el "},{type:1,value:"dateNumber"},{type:0,value:" de marzo de 2019."}],ALL_YOUR_PHOTOS_MATTER:[{type:0,value:'<span class="all-text">TODAS</span> tus fotos importan.'}],UPLOAD_LIMIT_EXTEND_MODAL_1:[{type:0,value:"Sabemos que la actualización reciente que limita las cargas de fotos y videos a "},{type:1,value:"limit"},{type:0,value:" para las cuentas gratuitas de Flickr fue grande. Nuestros fotógrafos de Flickr nos han comunicado claramente que necesitan más tiempo para asegurarse de que sus fotos estén a salvo."}],UPLOAD_LIMIT_EXTEND_MODAL_2:[{type:0,value:"Ya sea que vayas a actualizar a Flickr Pro para obtener almacenamiento ilimitado o descargar fotos para cumplir con el nuevo límite, vamos a extender la fecha límite al "},{type:1,value:"dateNumber"},{type:0,value:" de marzo de 2019."}],LIMIT_OVERLAY_STATS_DISAPPEAR_VIEWS_FAVES_TAGS:[{type:0,value:"Esto incluye algunas de las "},{type:1,value:"views"},{type:0,value:" vistas, "},{type:1,value:"faves"},{type:0,value:" favoritos y "},{type:1,value:"tags"},{type:0,value:" etiquetas adjuntas a esas fotos."}],LIMIT_OVERLAY_STATS_DISAPPEAR_VIEWS:[{type:0,value:"Esto incluye algunas de las "},{type:1,value:"views"},{type:0,value:" vistas adjuntas a esas fotos."}],LIMIT_OVERLAY_STATS_DISAPPEAR_FAVES:[{type:0,value:"Esto incluye algunos de los "},{type:1,value:"faves"},{type:0,value:" favoritos adjuntos a esas fotos."}],LIMIT_OVERLAY_STATS_DISAPPEAR_VIEWS_FAVES:[{type:0,value:"Esto incluye algunas de las "},{type:1,value:"views"},{type:0,value:" vistas y "},{type:1,value:"faves"},{type:0,value:" favoritos adjuntos a esas fotos."}],LIMIT_OVERLAY_STATS_DISAPPEAR_TAGS:[{type:0,value:"Esto incluye algunas de las "},{type:1,value:"tags"},{type:0,value:" etiquetas adjuntas a esas fotos."}],LIMIT_OVERLAY_STATS_DISAPPEAR_VIEWS_TAGS:[{type:0,value:"Esto incluye algunas de las "},{type:1,value:"views"},{type:0,value:" vistas y "},{type:1,value:"tags"},{type:0,value:" etiquetas adjuntas a esas fotos."}],LIMIT_OVERLAY_STATS_DISAPPEAR_FAVES_TAGS:[{type:0,value:"Esto incluye algunos de los "},{type:1,value:"faves"},{type:0,value:" favoritos y "},{type:1,value:"tags"},{type:0,value:" etiquetas adjuntas a esas fotos."}],RIGHT_NOW_PHOTOS_AT_RISK:[{type:0,value:"En este momento "},{type:1,value:"count"},{type:0,value:" tus fotos están en riesgo de ser borradas."}],TAKE_MOMENT_TO_PROTECT_PHOTOS:[{type:0,value:"Por favor tómate un momento para proteger las fotos en tu cuenta."}],PROTECT_THESE_PHOTOS:[{type:0,value:"Protege estas fotos."}],SAVE_YOUR_PHOTOS:[{type:0,value:"Guarda tus fotos"}],CONTINUE_WITHOUT_SECURING_PHOTOS:[{type:0,value:"Continuar sin asegurar "},{type:1,value:"count"},{type:0,value:" fotos."}],CONTINUE_WITHOUT_SECURING_PHOTOS_B:[{type:0,value:"Continuar sin asegurar que las "},{type:1,value:"count"},{type:0,value:" fotos han sido aseguradas"}],MARK_PHOTOS_FOR_DELETION:[{type:0,value:"No, marcar "},{type:1,value:"count"},{type:0,value:" para borrar."}],MARK_PHOTOS_FOR_DELETION_B:[{type:0,value:"No, marcar "},{type:1,value:"count"},{type:0,value:" para borrar"}],DONT_REMIND_AGAIN:[{type:0,value:"No volver a recordarme."}],DONT_REMIND_AGAIN_B:[{type:0,value:"No volver a recordarme"}],CHOOSE_ABOVE_TO_CONTINUE:[{type:0,value:"Elije una opción en la parte superior para continuar hacia tus fotos."}],DID_YOU_KNOW_FLICKR_PRO:[{type:0,value:"¿Sabías que Flickr Pro es mucho más que solo almacenamiento ilimitado?"}],UPGRADE_YOU_ALSO_GET:[{type:0,value:"También puedes obtener navegación libre de anuncios, asistencia técnica prioritaria de nuestros Héroes de Soporte y ahorrarás dinero con descuentos exclusivos en álbumes fotográficos, software y equipo de nuestros socios de industria."}],DONT_NEED_TO_BE_PROFESSIONAL:[{type:0,value:"No necesitas ser un profesional para ser Flickr Pro."}],FLICKR_PROS_LOVE_PHOTOGRAPHY:[{type:0,value:"Los usuarios de Flickr Pro simplemente aman la fotografía. Al unirte a Flickr Pro, te unes a una comunidad de personas que disfrutan de hablar, compartir y descubrir fotografías tanto como tú."}],JOIN_FLICKR_PRO:[{type:0,value:"Únete a Flickr Pro"}],OVER_UPLOAD_LIMIT_HEAD_FINAL:[{type:0,value:"Tus fotos están en riesgo de ser eliminadas."}],OVER_UPLOAD_LIMIT_COPY_FINAL:[{type:0,value:"Tu cuenta gratis de Flickr está limitada a "},{type:1,value:"limitCount"},{type:0,value:" fotos o videos. Los elementos más antiguos que sobrepasen el límite están en riesgo de ser eliminados. Actualizar a Flickr Pro para obtener almacenamiento ilimitado."}],LIKE_TO_KEEP_YOUR_PHOTOS:[{type:0,value:'Sabes bien que nos encantaría poder guardar todas tus fotos aquí para siempre de forma gratuita. (Incluyendo esta, la primer foto que subiste a Flickr.) Es posible que también sepas que tenemos <a href="'},{type:1,value:"rulesUrl"},{type:0,value:'">nuevas reglas para las cuentas gratuitas</a> y que tal vez sea necesario que elimines fotos que sobrepasen nuestros nuevos límites. Tienes '},{type:1,value:"photoCountString"},{type:0,value:" fotos que no podemos seguir guardando gratuitamente.  Es momento de que nos dejes saber que te gustaría hacer."}],DONT_SAVE_MY_PHOTOS:[{type:0,value:"No guardar mis fotos."}],CONTENT_DELETION_BANNER:[{type:0,value:"Tu cuenta gratuita de Flickr ha superado el límite de "},{type:1,value:"nonPublicAllowanceCount"},{type:0,value:' fotos no públicas. Mantenlas seguras. <a href="'},{type:1,value:"learnURL"},{type:0,value:'" target="_blank">Obtén más información</a>.'}],CONTENT_DELETION_HEAD:[{type:0,value:"Tus fotos corren el riesgo de ser eliminadas."}],CONTENT_DELETION_NOW_HEAD:[{type:0,value:"Tus fotos están en línea para ser eliminadas."}],CONTENT_DELETION_COPY:[{type:0,value:"Su cuenta gratuita de Flickr está limitada a "},{type:1,value:"nonPublicAllowanceCount"},{type:0,value:" fotos o videos no públicos. Los elementos más antiguos que superen el límite corren el riesgo de ser eliminados. Le queda "},{type:6,value:"daysLeft",options:{one:{value:[{type:0,value:"1 día"}]},other:{value:[{type:7},{type:0,value:" días"}]}},offset:0,pluralType:"cardinal"},{type:0,value:" para actualizar a Flickr Pro o para convertir tus fotos no públicas en públicas."}],CONTENT_DELETION_NOW_COPY:[{type:0,value:"Tu cuenta gratuita de Flickr está limitada a "},{type:1,value:"nonPublicAllowanceCount"},{type:0,value:" fotos o videos no públicos. Los elementos más antiguos superan el límite y se eliminan."}]})}),"@VERSION@",{requires:["intl"]});YUI.add("photo-prints-helper",(function(e,r){var t=require("url-parse"),i=require("hermes-core/flog")(r),n=require("superagent"),s=e.mix({langBundles:["prints"]},e.Localizable),o={default:"prints.SOMETHING_WRONG_PREPARING_PRINT",4:"prints.UNSUPPORTED_FILE_TYPE_PLEASE_JPG"};e.PhotoPrintsHelper=function(r){var a=e.config.flickr.flickrprints.devBaseUrl,l=e.config.flickr.flickrprints.baseUrl,c=e.config.flickr.flickrprints.cartPath,p=e.config.flickr.flickrprints.devApiKey,u=e.config.flickr.flickrprints.apiKey;return{isPrintFeatureEnabled:function(){return r.getViewer().signedIn||!r.getViewer().signedIn&&r.flipper.isFlipped("enable-buy-others-prints")},canPrintPhoto:function(e,t){return this.isPrintFeatureEnabled()&&!e.getValue("isVideo")&&!t.getValue("isIgnoredBy")&&(e.getValue("isOwner")||r.flipper.isFlipped("enable-buy-others-prints")&&!e.getValue("isOwner")&&e.getValue("engagement").getValue("canPrint"))},registerPrint:function(t,i){var n=this;return r.callAPI("flickr.printservice.getRedirectURL",{user_id:t.getValue("owner").getValue("id"),photo_id:t.getValue("id"),return_url:i}).then((function(r){return n.isPrintUrlSafe(r.redirectURL)?{redirectURL:r.redirectURL}:e.Promise.reject({message:n.getRegisterPrintErrorCodeMessage()})})).catch((function(e){throw{message:n.getRegisterPrintErrorCodeMessage(e.code)}}))},isPrintUrlSafe:function(e){var r=new t(e);return"https:"===r.protocol&&"https://"+r.hostname===this.getBaseUrl()},getBaseUrl:function(){return r.flipper.isFlipped("enable-photo-prints-prod-url")?l:a},getApiKey:function(){return r.flipper.isFlipped("enable-photo-prints-prod-url")?u:p},getCartUrl:function(){return this.getBaseUrl()+c},fetchCartCount:function(){var e=this.getBaseUrl()+"/api/v2/cart?APIKey="+this.getApiKey();return n.get(e).withCredentials().set("Accept","application/json").then((function(e){return{count:e&&e.body.Response.Cart?e.body.Response.Cart.ItemCount:0}})).catch((function(e){throw i.error("Error fetching cart count",{err:e}),e}))},fetchOrder:function(e){var r=this.getBaseUrl()+"/api/v2/order/"+e+"?_expand=OrderBillingAddress&APIKey="+this.getApiKey();return n.get(r).withCredentials().set("Accept","application/json").then((function(r){var t="/api/v2/order/"+e+"!billingaddress",i=r.body.Response.Order,n=r.body.Expansions[t];return{orderId:i.OrderID,orderUrl:i.WebUri,email:n.OrderBillingAddress.Email}}))},getRegisterPrintErrorCodeMessage:function(e){var r=e?e.toString():"";return o.hasOwnProperty(r)?s.intlMessage({intlName:o[r]}):s.intlMessage({intlName:o.default})}}}}),"@VERSION@",{requires:[],optionalRequires:["hermes-core"]});YUI.add("global-nav-view",(function(e,t){var i=require("hermes-core/flog")(t),n=new e.SubscriptionsHelper,o=new e.AgeAssuranceHelper,a=[{type:"digitalriver-redBanner",priority:0,placement:"header"},{type:"pastDue",priority:1,placement:"header"},{type:"loginMigration",priority:2,placement:"header"},{type:"accountSuspensionWarning",priority:2,placement:"header"},{type:"contentDeletionWarning",priority:2,placement:"header"},{type:"monthly2yOffer",priority:3,placement:"header"},{type:"wpd-explore-Banner",priority:4,placement:"header"},{type:"proClosedWinback",priority:3,placement:"header"},{type:"cookieConsent",priority:0,placement:"footer"},{type:"cookie",priority:0,placement:"footer"},{type:"defaultSafetyMigration",priority:0,placement:"modal"},{type:"surveyModal",priority:3,placement:"modal"},{type:"drWinbackPrompt",priority:3,placement:"modal"},{type:"digitalRiverWinbackToast",priority:0,placement:"toast"},{type:"accountSuspensionToast",priority:1,placement:"toast"},{type:"uploadLimitToast",priority:1,placement:"toast"},{type:"abandonedCartRecovery",priority:2,placement:"toast"}];e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(t){var i,n;if(void 0===t.enableBrowserUpgradeBanner&&(t.enableBrowserUpgradeBanner=!0),this.set("showBrowserUpgradeBanner",!1),YUI.Env.isServer&&t.enableBrowserUpgradeBanner){var o=this.appContext.request.headers["user-agent"],a=e.BrowserSupport.isUnsupportedBrowser(o),r=e.BrowserSupport.isBot(o),s=e.BrowserSupport.isSharingBot(o);!a||r||s||this.set("showBrowserUpgradeBanner",!0)}if(!YUI.Env.isServer){var l=e.StorageHelper.getItem("hasDismissedBrowserUpgradeBanner",!0);l&&"true"===l&&this.set("showBrowserUpgradeBanner",!1)}return""===this.get("container").get("innerHTML")&&this.setContainerHTML('<div class="global-nav-content"></div>'),this.appStateParams=t,this.themeClass=t.theme||"default-theme",i=this.appContext.getLocation(),n=t.modelParams&&t.modelParams.apiParams?t.modelParams.apiParams:i.href,this.searchUrl=new e.SearchUrl(n,this.appContext,t.searchType),this.isSOHP=t.isSOHP,this.isProPage=t.isProPage,this.disableMobileNav=t.disableMobileNav,this.hideBanner=t.isSearchResults,this.isRefencingAnnouncementPage=t.isRefencingAnnouncementPage,this.isDesktopWidthBreakpoint=1080,this.photoPrintsHelper=new e.PhotoPrintsHelper(this.appContext),this.mathHelper=new e.MathHelper,this.hasPendingGift=!1,this.hasExpiringGift=!1,this.convertDurationToString={week:this.intlMessage({intlName:"gift-pro.1_WEEK"}),month:this.intlMessage({intlName:"gift-pro.1_MONTH"}),year:this.intlMessage({intlName:"gift-pro.1_YEAR"})},this.STATUS_PENDING=1,this.STATUS_MUTED=2,this.STATUS_ACCEPTED=3,this.STATUS_REJECTED=4,this.STATUS_EXPIRED=5,this},subviewConfig:{"search-autosuggest-field-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0,isSOHP:this.isSOHP},"account-menu-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0},"notifications-menu-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1,disabled:function(){return!this.appContext.getViewer().signedIn}},"browser-upgrade-banner-view":{requiredToShowOnServer:!0,requiredToShowOnClient:!1,dealbreaker:!1,disabled:function(){return!this.get("showBrowserUpgradeBanner")}},"person-menu-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1,containerSelector:"#content, #stacking-overlay-container",excludeSelectors:[".c-account-menu"]},"group-menu-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1,containerSelector:"#content, #stacking-overlay-container",excludeSelectors:[".c-account-menu"]},"partner-account-banner-view":{requiredToShowOnServer:!1,requiredToShowOnClient:!1},"featured-toast-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1},"flickr-chat-center-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1,disabled:function(){return!this.appContext.flipper.isFlipped("enable-flickr-chat")||!this.appContext.getViewer().signedIn}},"slim-footer-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0,additionalViewClasses:["mobile-nav-drawer-list"],disabled:function(){return!this.appContext.flipper.isFlipped("enable-cookie-consent-execution-hermes")}}},loadState:function(){var t=this,i=this.appContext.getViewer(),n=[];return i.signedIn?(n.push(this.appContext.getModel("person-models",i.nsid).then((function(i){t.set("viewer",i),t.elementStates=t.setElementStates(t.appStateParams),t.appContext.flipper.isFlipped("enable-country-restrictions")&&(t.showAgeAssuranceNotice=!t.appContext.getCookie(e.config.flickr.modals.age_assurance_notice_seen)&&i.getValue("effectiveSafesearchLevel")===o.SAFESEARCH_ON)}))),n.push(this.appContext.getModel("person-profile-models",i.nsid).then((function(e){t.profileModel=e})))):this.elementStates=this.setElementStates(this.appStateParams),e.Promise.all(n)},buildContainer:function(){var t,i={},o=this.appContext.getViewer().signedIn;this.get("viewer")&&(i=e.merge(this.get("viewer").toJSON(),{urls:e.URLHelper.generatePersonUrls(this.get("viewer"))})),t={theme:this.themeClass,disableMobileNav:this.disableMobileNav,"show-browser-upgrade-banner":this.get("showBrowserUpgradeBanner"),showNotificationsMenu:!1,viewer:i,isSignedIn:o,elements:this.elementStates,isRefencingAnnouncementPage:this.isRefencingAnnouncementPage,upgradeProLink:n.getProLandingPageUrl(n.UTM_GLOBAL_NAV,{utm_content:this.intlMessage({intlName:"common.GET_PRO"})})},o&&(t["notifications-menu-view"]=this.subviews["notifications-menu-view"].get("container"),t.showNotificationsMenu=!0),this.photoPrintsHelper.isPrintFeatureEnabled()&&(t.printCartUrl=this.photoPrintsHelper.getCartUrl());const a=this.appContext.flipper;if(a.isFlipped("enable-flickr-bday")||a.isFlipped("enable-force-flickr-bday")){const e={"en-US":"https://blog.flickr.net/en/2025/02/10/flickrs-21-day-birthday-photo-challenge-starts-today/","fr-FR":"https://blog.flickr.net/fr/2025/02/10/le-defi-photo-danniversaire-de-21-jours-de-flickr-commence-aujourdhui/","de-DE":"https://blog.flickr.net/de/2025/02/10/flickrs-21-tage-geburtstagsfoto-challenge-beginnt-heute/","zh-HK":"https://blog.flickr.net/zh/2025/02/10/flickr-%E7%9A%84-21-%E5%A4%A9%E7%94%9F%E6%97%A5%E7%85%A7%E7%89%87%E6%8C%91%E6%88%B0%E8%B3%BD%E4%BB%8A%E5%A4%A9%E9%96%8B%E5%A7%8B%EF%BC%81/","pt-BR":"https://blog.flickr.net/pt/2025/02/10/o-desafio-fotografico-de-aniversario-de-21-dias-do-flickr-comeca-hoje/","es-US":"https://blog.flickr.net/es/2025/02/10/el-desafio-fotografico-de-cumpleanos-de-21-dias-de-flickr-comienza-hoy/"};t.cupcakeUrl=this.appContext.lang in e?e[this.appContext.lang]:e["en-US"],t.showCupcake=!0}return this.setContainerWithTemplate("global-nav",t),this},activate:function(){var o=this,r=(this.appContext.flapp.get("activeView").name,this.get("container")),s=this.appContext.getViewer(),l=r.one(".gn-upload .gn-title");return this.contentContainer=r.one(".global-nav"),r.one(".mobile-nav-toggle")&&(this.navDrawer=r.one(".mobile-nav-drawer"),this.navDrawerOverlay=r.one(".mobile-nav-drawer-overlay"),this.registerEventHandler(r.one(".mobile-nav-toggle").on("click",(function(e){o.navDrawerShown?o.hideMobileNavDrawer():o.showMobileNavDrawer()}))),this.registerEventHandler(this.navDrawer.delegate("click",this.handleDrawerItemClick.bind(this),".mobile-nav-menu-item, .slim-footer > :not(.lang-switcher)"))),r.one(".mobile-search-button")?(this.registerEventHandler(r.one(".mobile-search-button").on("click",function(e){o.contentContainer.addClass("search-open"),o.fire("parentViewEvent","focus-search-field"),r.one(".flickr-logo-container").addClass("hidden")}.bind(this))),this.registerEventHandler(e.on("add-context-to-search-field",(function(e,t=!0){o.contentContainer.addClass("search-open"),t&&o.fire("parentViewEvent","focus-search-field")}),this))):this.registerEventHandler(e.globalEvents.subscribe("window:resize",function(t){var i=e.config.win.innerWidth<=this.isDesktopWidthBreakpoint,n=i?this.appContext.viewportData.getWidth():0,a=i?46:0;i||(o.contentContainer.removeClass("search-open"),r.one(".flickr-logo-container").removeClass("hidden")),o.fire("parentViewEvent","resize-search-field",n-a)}.bind(this))),r.one(".mobile-search-close-button")&&this.registerEventHandler(r.one(".mobile-search-close-button").on("click",function(e){o.contentContainer.removeClass("search-open"),r.one(".flickr-logo-container").removeClass("hidden"),o.fire("parentViewEvent","clear-search-field")}.bind(this))),r.all(".cameraFinderLink")&&this.appContext.flipper.isFlipped("enable-next-camerafinder")&&this.registerEventHandler(r.all(".cameraFinderLink").on("click",(()=>{var t=new Date;t.setTime(t.getTime()+1728e5),this.appContext.setCookie({cookieName:"flcfnr",cookieValue:1,expires:t,path:"/"}),window.location=e.url("/cameras")}))),s.signedIn||l&&this.registerEventHandler(l.on("click",this.signUpAndUpload.bind(this))),e.AnchorRepositioner.addOffset(t,r),this.registerEventHandler(r.delegate("keydown",this.toggleSubmenu.bind(this),"a[aria-haspopup=true]")),this.registerEventHandler(r.delegate("keydown",this.enterSubmenu.bind(this),"a[aria-haspopup=true]")),this.registerEventHandler(r.on("keydown",this.goToSubmenuHeading.bind(this),"ul.gn-submenu")),this.registerEventHandler(r.delegate("keydown",this.keyboardNavigation.bind(this),"ul.nav-menu")),this.registerEventHandler(r.delegate("mouseup",this.toggleAriaExpanded.bind(this),"a[aria-haspopup=true]")),this.toastSubview=this.subviews["featured-toast-view"],this.registerEventHandler(e.on("accountCard:overLimitLearnMoreClick",(function(){o.showOverLimitToast()}))),this.registerEventHandler(e.on("printsPage:choosePhotosClicked",(function(){o.handlePrintClick()}))),this.photoPrintsHelper.isPrintFeatureEnabled()&&(this.printsButton=r.one(".gn-create .prints-button"),this.mobilePrintsButton=r.one(".mobile-nav-drawer .prints-button"),this.cartLink=r.one(".gn-create .cart-link"),this.mobileCartLink=r.one(".mobile-nav-drawer .cart-link"),this.printsButton&&this.registerEventHandler(this.printsButton.on("click",this.handlePrintClick.bind(this))),this.mobilePrintsButton&&this.registerEventHandler(this.mobilePrintsButton.on("click",this.handlePrintClick.bind(this))),(this.cartLink||this.mobileCartLink)&&(this.photoPrintsHelper.fetchCartCount().then((function(e){var t=e?e.count:0,i=o.intlMessage({intlName:"prints.VIEW_CART_WITH_COUNT",count:void 0!==t?t.toString():"0"});t>0&&(o.cartLink.removeClass("disabled"),o.mobileCartLink.removeClass("disabled")),o.cartLink.set("innerHTML",i),o.mobileCartLink.set("innerHTML",i)})).catch((function(e){var t=o.intlMessage({intlName:"prints.VIEW_CART_WITH_COUNT",count:"0"});o.cartLink.set("innerHTML",t),o.mobileCartLink.set("innerHTML",t)})),this.prepareOrderConfirmationModal())),this.appContext.bannerManager.loadBanners(a).then((function(){var e=this.appContext.bannerManager.getBanners(["header","footer","modal"]);0===e.length&&(e=this.appContext.bannerManager.getBanners(["toast"])),e.forEach((function(e){return this.appContext.bannerManager.renderBannerView(e)}))})),this.registerEventHandler(this.appContext.bannerManager.on("renderBanner",(function(t){var i,a,l;if("header"===t.placement)return a=(i=t.bannerView).get("container"),(l=r.one(".nav-banner-container")).empty(),l.appendChild(a),i.on("subviewActivated",(function(){e.fire("globalNav:bannerSubviewActivated")})),o.registerEventHandler(i.on("dismissed",(function(){i.get("container").remove(),i.destroy(),e.fire("globalNav:bannerDismissed")}))),i.normalizedActivate();if("toast"===t.placement)return a=(i=t.bannerView).get("container"),i.activate().then((function(){var t=i.subview;o.toastSubview.setup(t.featuredToastConfig),o.toastSubview.on("primaryActionClicked",(function(e){t.handleToastPrimaryActionClick(e)})),o.toastSubview.on("secondaryActionClicked",(function(e){t.handleToastSecondaryActionClick(e)})),o.toastSubview.on("closeButtonClicked",(function(e){t.handleCloseButtonClick(e)})),o.registerEventHandler(i.on("dismissed",(function(){i.get("container").remove(),o.toastSubview.dismiss()}))),o.toastSubview.show(),"abandoned-cart-recovery-view"===t.name&&e.Snowplough&&n.sendPurchaseFunnelEvent({step:"cart_recovery_show",nsid:s.nsid,sku:this.appContext.segments.getAbandonedCartRecoverySegmentProPlanId()})}));if("modal"===t.placement){i=t.bannerView;var c=e.merge({appContext:o.appContext,noScroll:!0,maxHeight:!1,width:560,hasSubviewConfigRefactor:!0,subview:i},t.containerConfig),d=new e.Views.FluidModal(c);d.show(),o.registerEventHandler(d.on("close",(()=>{i.handleContainerClose()}))),o.registerEventHandler(i.on("dismissed",(()=>{d.close()})))}}))),s.signedIn&&"pro-checkout-route"!==this.appContext.routeConfig.module&&this.appContext.callAPI("flickr.payments.getUserGiftList",{status:"1,2"}).then(function(t){this.hasPendingGift=t.hasPendingGifts&&!this.appContext.getCookie(e.config.flickr.modals.dismiss_pending_gift_modal_name),this.pendingGifts=[],this.expiringGifts=[],(t.hasPendingGifts||t.hasMutedGifts)&&t.gifts.forEach(function(t){if(t.giftStatus===this.STATUS_PENDING&&this.pendingGifts.push(t),t.giftStatus===this.STATUS_MUTED){var i=e.moment.unix(t.giftGivenDate).add(1,"Y");e.moment(i).subtract(1,"w").isBefore(e.moment())&&this.expiringGifts.push(t)}}.bind(this)),this.expiringGifts.length>0&&!this.appContext.getCookie(e.config.flickr.modals.dismiss_expiring_gift_modal_name)&&this.showExpiringGiftModal(),this.hasPendingGift&&this.showPendingGiftModal()}.bind(this)).catch(function(e){i.log(e)}.bind(this)),this.showAgeAssuranceNotice&&this.showAgeAssuranceModal(),this},showHelloProModal:function(){var t=e.URLHelper.generatePersonUrls(this.get("viewer")),i=new e.Views.FluidModal({actionButtonLabel:this.intlMessage({intlName:"checkout.OK_THANKS"}),htmlMessage:this.templates("pro-hello-pro")({photostreamURL:e.url(t.photostream)}),showBodyLines:!0,showHeader:!1,appContext:this.appContext,dismissOnOverlayClick:!1,dismissOnActionClick:!0,actionButtonDisabled:!1,actionButtonIsDangerous:!1,showCancelButton:!1,classList:"welcome-pro-modal",showCancelX:!1});i.on("activated",(function(t){var n=i.get("container").one(".freebrowsing"),o=i.get("container").one(".auto-uploadr"),a=i.get("container").one(".partners");n.on("click",(function(t){e.config.win.location=e.url("/")})),o.on("click",(function(t){e.config.win.location=e.url("/tools")})),a.on("click",(function(t){e.config.win.location=e.url("/account")}))})),i.on("actionClick",(function(){e.config.win.location.reload()})),i.show()},showExpiringGiftModal:function(){var e,t,i,n=!1,o={};(this.expiringGifts.length>1&&(n=!0),n)?(e=this.intlMessage({intlName:"gift-pro.GIFT_WAITING_TITLE_MULTIPLE"}),t=this.intlMessage({intlName:"gift-pro.EXPIRES_SOON_MULTIPLE",count:this.expiringGifts.length})):(i=(o=this.expiringGifts[0]).giverNsid||o.giverName?o.giverName:this.intlMessage({intlName:"gift-pro.ANONYMOUS"}),e=this.intlMessage({intlName:"gift-pro.GIFT_WAITING_TITLE"}),t=this.intlMessage({intlName:"gift-pro.EXPIRES_SOON",giverName:i,duration:this.convertDurationToString[o.giftType]}));var a={modalTitle:e,modalText:t,hasMultiple:n,gift:o,cookieName:"dismiss_expiring_gift_modal_name",giftList:this.expiringGifts,isExpiringGift:!0};this.setupGiftModal(a)},showPendingGiftModal:function(){var e,t,i=this.intlMessage({intlName:"gift-pro.YOUVE_GOT_GIFT"}),n=!1,o={};(this.pendingGifts.length>1&&(n=!0),n)?e=this.intlMessage({intlName:"gift-pro.LUCKY_RECIPIENT_MULTIPLE",count:this.pendingGifts.length}):(t=(o=this.pendingGifts[0]).giverNsid||o.giverName?o.giverName:this.intlMessage({intlName:"gift-pro.ANONYMOUS"}),e=this.intlMessage({intlName:"gift-pro.LUCKY_RECIPIENT_ACTIVATE_NOW",giverName:t,duration:this.convertDurationToString[o.giftType]}));var a={modalTitle:i,modalText:e,hasMultiple:n,gift:o,cookieName:"dismiss_pending_gift_modal_name",giftList:this.pendingGifts,isExpiringGift:!1};this.setupGiftModal(a)},setupGiftModal:function(t){var i,o=this,a=this.templates("pending-gift-modal")({modalTitle:t.modalTitle,modalText:t.modalText,hasMultiple:t.hasMultiple});return(i=new e.Views.FluidModal({appContext:o.appContext,noScroll:!0,dismissOnOverlayClick:!1,showActionButton:!1,actionButtonIsDangerous:!1,showCancelButton:!1,maxHeight:!1,htmlMessage:a,showBodyLines:!0,showHeader:!1,showCancelX:!1,buttonFlavorText:this.intlMessage({intlName:"gift-pro.DO_LATER"}),classList:"pending-gift-pro-modal"})).show(),i.on("activated",(function(){var a=i.get("container").one(".activate-button"),r=i.get("container").one(".decline-button"),s=i.get("container").one(".view-gifts-button"),l=i.get("container").one(".flavor-text"),c=i.get("container").one(".error-text");a&&a.on("click",(function(d){a.setAttribute("disabled"),r&&r.setAttribute("disabled"),s&&s.setAttribute("disabled"),l&&l.setStyle("pointerEvents","none");var h=o.get("viewer").getValue("isPro"),p=[];p.push({gift_id:t.gift.giftId,status:o.STATUS_ACCEPTED}),o.appContext.callAPI("flickr.payments.updateUserGiftStatus",{gifts:JSON.stringify(p)}).then((function(d){0===d.gift_update_fail_count?(i.close(),h?e.config.win.location.reload():o.showHelloProModal(),n.sendGiftPurchaseEvent({step:"gift_accepted",recipientNsid:o.get("viewer").id,gifterNsid:t.gift.giverNsid,duration:o.modalParams.gift.giftType,giftId:t.gift.giftId})):(c.addClass("error-occurred"),a.removeAttribute("disabled"),r&&r.removeAttribute("disabled"),s&&s.removeAttribute("disabled"),l&&l.setStyle("pointerEvents","auto"))})).catch((function(e){c.addClass("error-occurred"),a.removeAttribute("disabled"),r&&r.removeAttribute("disabled"),s&&s.removeAttribute("disabled"),l&&l.setStyle("pointerEvents","auto")}))})),r&&r.on("click",(function(d){r.setAttribute("disabled"),a&&a.setAttribute("disabled"),s&&s.setAttribute("disabled"),l&&l.setStyle("pointerEvents","none");var h=[];h.push({gift_id:t.gift.giftId,status:o.STATUS_REJECTED}),o.appContext.callAPI("flickr.payments.updateUserGiftStatus",{gifts:JSON.stringify(h)}).then((function(d){0===d.gift_update_fail_count?(i.close(),e.config.win.location.reload(),n.sendGiftPurchaseEvent({step:"gift_rejected",recipientNsid:o.get("viewer").id,gifterNsid:t.gift.giverNsid,duration:o.modalParams.gift.giftType,giftId:t.gift.giftId})):(c.addClass("error-occurred"),r.removeAttribute("disabled"),a&&a.removeAttribute("disabled"),s&&s.removeAttribute("disabled"),l&&l.setStyle("pointerEvents","auto"))})).catch((function(e){c.addClass("error-occurred"),r.removeAttribute("disabled"),a&&a.removeAttribute("disabled"),s&&s.removeAttribute("disabled"),l&&l.setStyle("pointerEvents","auto")}))})),s&&s.on("click",(function(n){s.setAttribute("disabled"),a&&a.setAttribute("disabled"),r&&r.setAttribute("disabled"),l&&l.setStyle("pointerEvents","none");var c=t.isExpiringGift||!1,d=t.giftList.map((e=>({gift_id:e.gift_id,status:o.STATUS_MUTED})));o.appContext.callAPI("flickr.payments.updateUserGiftStatus",{gifts:JSON.stringify(d)}).then((function(n){if("ok"!==n.stat||c){var a=new Date;a.setTime(a.getTime()+864e5),o.appContext.cookieCatcher.setCookieIfAllowed(e.config.flickr.modals[t.cookieName],1,{expires:a,path:"/"})}i.close(),o.appContext.flapp.navigate("/account")}))})),l&&l.on("click",(function(n){i.close();var a=t.isExpiringGift||!1,r=t.giftList.map((e=>({gift_id:e.gift_id,status:o.STATUS_MUTED})));o.appContext.callAPI("flickr.payments.updateUserGiftStatus",{gifts:JSON.stringify(r)}).then((function(i){if("ok"!==i.stat||a){var n=new Date;n.setTime(n.getTime()+864e5),o.appContext.cookieCatcher.setCookieIfAllowed(e.config.flickr.modals[t.cookieName],1,{expires:n,path:"/"})}}))}))})),e.Promise.resolve()},clearKeyboardFocus:function(e){this.get("container").all(".has-keyboard-focus").removeClass("has-keyboard-focus"),this.get("container").all(".nav-menu a[aria-expanded=true]").setAttribute("aria-expanded","false")},toggleAriaExpanded:function(e){e.target.setAttribute("aria-expanded","false"===e.target.getAttribute("aria-expanded")?"true":"false")},enterSubmenu:function(e){if(40===e.keyCode){e.preventDefault();var t=e.target.next("ul");t&&t.hasClass("has-keyboard-focus")&&t.one(":first-child").one(":first-child").focus()}},toggleSubmenu:function(e){var t=e.keyCode;if(13===t||32===t){e.preventDefault();var i=e.target.next("ul");i&&(i.hasClass("has-keyboard-focus")?this.clearKeyboardFocus():(i.addClass("has-keyboard-focus"),e.target.setAttribute("aria-expanded","true")))}},goToSubmenuHeading:function(e,t){var i;(t||27===e.keyCode)&&(t||this.clearKeyboardFocus(),e.target.hasClass("gn-submenu")?i=e.target.previous("a"):e.target.ancestor("ul.gn-submenu")&&(i=e.target.ancestor("ul.gn-submenu").previous("a")),i&&i.focus())},keyboardNavigation:function(e){var t=e.keyCode,i=9===t&&e.shiftKey,n=9===t&&!e.shiftKey;e.target.hasClass("gn-title")?(i=(37===t||i)&&e.target.ancestor("li").previous("li"),n=(39===t||n)&&!!e.target.ancestor("li").next("li"),i?(this.clearKeyboardFocus(),this.focusOnPreviousItem(e)):!n||e.target.next("ul")&&e.target.next("ul").hasClass("has-keyboard-focus")||(this.clearKeyboardFocus(),this.focusOnNextItem(e))):38===t||i?this.focusOnPreviousItem(e):(40===t||n)&&this.focusOnNextItem(e)},focusOnPreviousItem:function(e){e.preventDefault();var t=e.target.ancestor("li").previous("li:not(.divider)");t?t.one(":first-child").focus():e.target.ancestor("ul.gn-submenu")&&this.goToSubmenuHeading(e,!0)},focusOnNextItem:function(e){e.preventDefault();var t=e.target.ancestor("li").next("li:not(.divider)");t&&t.one(":first-child").focus()},signUpAndUpload:function(t){var i,n=e.url("/upload/"),o=this.intlMessage({intlName:"global-nav.UPLOAD_MODAL_SIGNUP_TITLE"});t.halt(),e.rapidTracker.beacon(this.name,"uploadButtonClick"),(i=new e.Views.SignUpModal({appContext:this.appContext,signUpHeaderClass:"signup-upload",signUpTitle:o,beaconPrefix:"upload"})).on("signUpClick",(function(t){e.SigninHelper._redirectToSignUp("upload",{postLoginUrl:n})})),i.on("signInClick",(function(t){e.SigninHelper._redirectToSignin("upload",{postLoginUrl:n})})),i.show()},executeSearch:function(e){var t,i=this.get("container").one("#gn-search-field").getDOMNode();t=this.searchUrl.createNewSearch(i.value).getURL(),e.halt(),this.appContext.flapp.navigate(t)},setElementStates:function(e){var t=this.appContext.getViewer(),i=e.isSOHP&&!t.signedIn,n=e.isProPage,o={you_link:!1,you_menu:!1,contacts_menu:!1,groups_menu:!1,explore_menu:!1,weekly_flickr:!1,get_pro_link:!0,upload_icon:!1,account_menu:!1,search_bar:!1,signup_link:!1,signin_link:!1,right_side_signup:!0,vr_link:!0,sidebar_signin_link:!1};return i?(o.search_bar=!0,o.signin_link=!0,o.signup_link=!0,o.get_pro_link=!1):n?(o.you_menu=!1,o.explore_menu=!1,o.upload_icon=!1,o.search_bar=!1,o.account_menu=!0,o.get_pro_link=!1):t.signedIn?(o.you_menu=!0,o.explore_menu=!0,o.upload_icon=!0,o.search_bar=!0,o.account_menu=!0):(o.signup_link=!0,o.explore_menu=!0,o.upload_icon=!0,o.search_bar=!0,o.signin_link=!0),this.get("viewer")&&this.get("viewer").getValue("isPro")&&(o.stats=!0,o.get_pro_link=!1),"en-us"===this.appContext.lang.toLowerCase()&&(o.weekly_flickr=!0),n||i||(o.prints_menu=!0,o.print_shop_link=this.appContext.flipper.isFlipped("enable-prints-discovery-page")),o.events_link=!0,o.weekly_flickr=!1,o.vr_link=!1,this.isSOHP||t.signedIn||(o.sidebar_signin_link=!0),o},isExpiringPartnerAccount:function(){var e=this.get("viewer").getValue("expiringPartner");return this.appContext.flipper.isFlipped("enable-partner-account-banner")&&e&&-1===["embedr-route","browser-upgrade-interstitial-route","products-marketplace-eol-route","products-account-payouts-route","error-route"].indexOf(this.appContext.routeConfig.module)},handleToastActionClick:function(t){var i=t&&t.clickEvent?t.clickEvent.target.getAttribute("href"):null;i?e.config.win.location.href=i:this.toastSubview.dismiss()},setProRedirectCookie:function(){var t=new Date;t.setTime(t.getTime()+60*e.config.flickr.upload_blocking.photo_limit_pro_redir_cookie_hours*60*1e3),this.appContext.setCookie({cookieName:e.config.flickr.upload_blocking.photo_limit_pro_redir_cookie_name,cookieValue:1,expires:t,path:"/"})},showOverLimitToast:function(){this.toastSubview&&this.appContext.flipper.isFlipped("enable-upload-limit-messages")&&e.UserLimitsHelper.isOverARRLimit(this.profileModel,this.appContext)&&(this.toastSubview.setup({htmlContent:this.templates("upload-limit-message")({title:this.intlMessage({intlName:"upload-blocking.OVER_UPLOAD_LIMIT_HEAD_FINAL"}),description:this.intlMessage({intlName:"upload-blocking.OVER_UPLOAD_LIMIT_COPY_FINAL",limitCount:e.config.flickr.account.photo_limit.toLocaleString(this.appContext.lang,{maximumFractionDigits:0})}),primaryActionText:this.intlMessage({intlName:"common.GET_PRO"}),secondaryActionText:this.intlMessage({intlName:"common.DISMISS"})}),classList:["urgent"]}),this.toastSubview.on("primaryActionClicked",this.handleToastActionClick.bind(this)),this.toastSubview.on("secondaryActionClicked",this.handleToastActionClick.bind(this)),this.toastSubview.show())},handlePrintClick:function(){"en-us"===this.appContext.lang.toLowerCase()?this.appContext.getCookie(e.config.flickr.flickrprints.dismiss_intro_to_prints_cookie_name)?this.showPrintSelector():this.showIntroToPrintsModal():this.showEnglishPrintWarningModal()},showPrintSelector:function(){var t=this,i=this.intlMessage({intlName:"prints.CHOOSE_PHOTO_TO_GET_PRINTS"}),n=[{id:"photostream",name:this.intlMessage({intlName:"common.PHOTOSTREAM"}),value:"photostream",selected:!0},{id:"sets",name:this.intlMessage({intlName:"common.ALBUMS"}),value:"sets"},{id:"upload",name:this.intlMessage({intlName:"global-nav.UPLOAD"}),value:"upload"}],o=[{id:"photostream",name:this.intlMessage({intlName:"common.PHOTOSTREAM"}),value:"photostream",selected:!0},{id:"sets",name:this.intlMessage({intlName:"common.ALBUMS"}),value:"sets"},{id:"upload",name:this.intlMessage({intlName:"global-nav.UPLOAD"}),value:"upload"}],a=[{id:"photostream",name:this.intlMessage({intlName:"common.PHOTOSTREAM"}),value:"photostream",selected:!0},{id:"sets",name:this.intlMessage({intlName:"common.ALBUMS"}),value:"sets"}],r={appContext:this.appContext,searchable:{yours:!0,contacts:!1,everyone:!1,marketplace:!1},navBarConfig:{appContext:this.appContext,links:n,enableSearch:!0,breakpointConfig:[{maxWidth:700,links:o,enableSearch:!1},{maxWidth:500,links:a,enableSearch:!1}],onClose:e=>{this.printSelectorModal.close()}},onConfirm:e=>{this.handleBuyPrintClick(e)},actionMessageConfig:{messageIsError:!1,showMessage:!0,message:i},actionButtonLabel:this.intlMessage({intlName:"prints.BUY_PRINTS"}),initialButtonState:{confirm:"disabled"}};this.printSelector=new e.Views["photo-selector-view"](r),this.printSelectorModal=new e.Views.FluidModal({appContext:this.appContext,subview:this.printSelector,width:Math.round(.8*Math.max(1280,e.config.win.innerWidth)),height:Math.round(e.config.win.innerHeight-60),fullWindow:!0,classList:"photo-selector",hasSubviewConfigRefactor:!0,flexLayout:!0}),this.printSelectorModal.show(),this.printSelectorModal.registerEventHandler(e.on("photoSelector:selected",(function(e){t.printSelector.confirmView.setButtonState({confirm:""}),t.printSelector.confirmView.setMessageState({message:i,isError:!1})}))),this.printSelectorModal.registerEventHandler(e.on("photoSelector:unselected",(function(e){t.printSelector.confirmView.setButtonState({confirm:"disabled"})})))},handleBuyPrintClick:function(){var t,i=this,n=this.printSelector.get("selected");e.config.win.location.href;this.printSelector.confirmView.setButtonState({confirm:"loading"}),this.appContext.getModel("photo-models",n).then((function(e){return t=e,i.appContext.getModel("person-relationship-models",t.getValue("owner").getValue("nsid"))})).then((function(n){return i.photoPrintsHelper.canPrintPhoto(t,n)?i.photoPrintsHelper.registerPrint(t,e.config.win.location.href):e.Promise.reject({message:"Error: Can’t print photo."})})).then((function(t){e.config.win.location.href=t.redirectURL})).catch((function(e){i.printSelector.confirmView.setButtonState({confirm:""}),i.printSelector.confirmView.setMessageState({message:e.message||i.intlMessage({intlName:"prints.SOMETHING_WRONG_PREPARING_PRINT"}),isError:!0})}))},showEnglishPrintWarningModal:function(t){new e.Views.FluidModal({appContext:this.appContext,subview:new e.Views["confirmation-dialog-view"]({appContext:this.appContext,title:this.intlMessage({intlName:"prints.ENGLISH_LANGUAGE_AHEAD"}),htmlMessage:this.intlMessage({intlName:"prints.ORDERING_IS_ENGLISH_ONLY"}),confirmButtonText:this.intlMessage({intlName:"prints.CONTINUE_IN_ENGLISH"}),cancelButtonText:"en-us"===this.appContext.lang.toLowerCase()?this.intlMessage({intlName:"common.GO_BACK_BUTTON"}):this.intlMessage({intlName:"common.CANCEL"}),onConfirm:()=>{setTimeout((()=>{this.appContext.getCookie(e.config.flickr.flickrprints.dismiss_intro_to_prints_cookie_name)?this.showPrintSelector():this.showIntroToPrintsModal()}),0)}}),hasSubviewConfigRefactor:!0}).show()},handleDrawerPageMouseDown:function(e){var t=e.target;t.ancestor(".mobile-nav-drawer",!0)||t.ancestor(".mobile-nav-toggle",!0)||this.hideMobileNavDrawer()},handleDrawerItemClick:function(e){this.hideMobileNavDrawer()},showMobileNavDrawer:function(){var t=this;this.get("container");this.contentContainer.addClass("drawer-open"),this.navDrawerShown=!0,this.navDrawer.addClass("shown"),e.fire("globalNav:navDrawerOpen"),clearTimeout(this.navDrawerOverlayHideTimeout),this.navDrawerOverlay&&(this.navDrawerOverlay.addClass("displayed"),setTimeout((function(){t.navDrawerOverlay.addClass("shown")}),10)),this.drawerPageClickHandler||setTimeout((function(){t.drawerPageClickHandler=e.on(["mousedown","touchstart"],t.handleDrawerPageMouseDown.bind(t)),t.registerEventHandler(t.drawerPageClickHandler)}),10)},hideMobileNavDrawer:function(){var t=this;this.get("container");this.contentContainer.removeClass("drawer-open"),this.navDrawerShown=!1,this.navDrawer.removeClass("shown"),e.fire("globalNav:navDrawerClosed"),this.navDrawerOverlay&&(this.navDrawerOverlay.removeClass("shown"),this.navDrawerOverlayHideTimeout=setTimeout((function(){t.navDrawerOverlay.removeClass("displayed")}),500)),this.drawerPageClickHandler&&(this.detachRegisteredEvent(this.drawerPageClickHandler),
this.drawerPageClickHandler=void 0)},prepareOrderConfirmationModal:function(){var t,i=this,n=e.QueryString.parse(e.config.win.location.search.replace("?",""));e.config.win.location.href;this.photoPrintsHelper.isPrintFeatureEnabled()&&n&&void 0!==n.OrderID&&(t=n.OrderID,this.photoPrintsHelper.fetchOrder(t).then((function(e){i.showOrderConfirmationModal({orderId:e.orderId,orderUrl:e.orderUrl,email:e.email})})).catch((function(e){i.showOrderConfirmationModal({})})))},showOrderConfirmationModal:function(t){var i=this,n=this.templates("print-order-confirmation")({orderNum:t.orderId,orderUrl:t.orderUrl,email:t.email,helpUrl:"https://flickrhelp.com/",feedbackUrl:"/help/forum"}),o=new e.Views.FluidModal({appContext:this.appContext,noScroll:!0,maxHeight:!1,showHeader:!1,showFooter:!1,showCancelX:!1,width:460,htmlMessage:n});o.show(),o.on("activated",(function(){i.registerEventHandler(o.get("container").one("button.accept-button").on("click",(function(){o.close()})))}))},showIntroToPrintsModal:function(){var t=this,i=this.templates("intro-to-prints")({}),n=new e.Views.FluidModal({appContext:this.appContext,noScroll:!0,dismissOnOverlayClick:!0,maxHeight:!1,showHeader:!1,showFooter:!1,width:450,contentPadding:0,showCancelX:!0,htmlMessage:i});n.show(),n.on("activated",(function(){n.get("container").one(".accept-button").on("click",(function(e){n.close()}))})),n.on("close",(function(){var i=new Date;i.setTime(i.getTime()+36e10),t.appContext.setCookie({cookieName:e.config.flickr.flickrprints.dismiss_intro_to_prints_cookie_name,cookieValue:1,expires:i,path:"/"}),setTimeout((function(){t.showPrintSelector()}),0)}))},showAgeAssuranceModal:function(){var t=o.getAgeAssuranceModalContent(this.get("viewer").getValue("contentRestrictions")),i=new Date;i.setTime(i.getTime()+2592e6);var n=new e.Views["confirmation-dialog-view"]({appContext:this.appContext,title:this.intlMessage({intlName:t.title}),htmlMessage:"<p>"+this.intlMessage({intlName:t.htmlMessage})+"</p>",confirmButtonText:this.intlMessage({intlName:t.confirmButtonText}),cancelButtonText:this.intlMessage({intlName:t.cancelButtonText}),onConfirm:n=>{this.appContext.cookieCatcher.setCookieIfAllowed(e.config.flickr.modals.age_assurance_notice_seen,1,{expires:i,path:"/"}),this.appContext.flapp.navigate(t.confirmUrl)},onCancel:t=>{this.appContext.cookieCatcher.setCookieIfAllowed(e.config.flickr.modals.age_assurance_notice_seen,1,{expires:i,path:"/"})},onClose:t=>{this.appContext.cookieCatcher.setCookieIfAllowed(e.config.flickr.modals.age_assurance_notice_seen,1,{expires:i,path:"/"})}});new e.Views.FluidModal({appContext:this.appContext,subview:n,dismissOnOverlayClick:!1,hasSubviewConfigRefactor:!0}).show()},destructor:function(){e.AnchorRepositioner.removeOffset(t)}})}),"@VERSION@",{requires:["flickr-view","hermes-template-global-nav","hermes-template-pending-gift-modal","hermes-template-upload-limit-message","hermes-template-print-order-confirmation","hermes-template-intro-to-prints","hermes-template-pro-hello-pro","search-url","search-autosuggest-field-view","querystring-parse-simple","querystring-stringify-simple","notifications-menu-view","url-helper","person-menu-view","group-menu-view","browser-support","fluid-modal-view","signup-modal-view","signin-helper","storage-helper","partner-account-banner-view","flickr-chat-center-view","featured-toast-view","user-limits-helper","photo-selector-view","banner-view","photo-prints-helper","math-helper","slim-footer-view","subscriptions-helper","age-assurance-helper","url"],optionalRequires:["hermes-core"],langBundles:["global-nav","common","search","upload-blocking","prints","blurb","thanks","gift-pro","checkout","errors"]});